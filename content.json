{"meta":{"title":"smxknife's Blog","subtitle":"å°äººç‰©ï¼Œå¤§æ¢¦æƒ³","description":"ç¨‹åºå‘˜æˆé•¿ç¬”è®°","author":"smxknife","url":"http://www.smxknife.com"},"pages":[{"title":"categories","date":"2017-03-18T16:02:27.000Z","updated":"2018-03-21T20:11:07.000Z","comments":false,"path":"categories/index.html","permalink":"http://www.smxknife.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2017-03-18T16:02:27.000Z","updated":"2018-03-21T20:10:16.038Z","comments":false,"path":"tags/index.html","permalink":"http://www.smxknife.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Gitä¹‹æš‚å­˜åŒº","slug":"Gitä¹‹æš‚å­˜åŒº","date":"2018-03-27T18:09:36.000Z","updated":"2018-03-27T18:11:09.000Z","comments":true,"path":"2018/03/28/Gitä¹‹æš‚å­˜åŒº/","link":"","permalink":"http://www.smxknife.com/2018/03/28/Gitä¹‹æš‚å­˜åŒº/","excerpt":"","text":"å‰ç¯‡ä¹‹å‰æäº¤è¿‡demoï¼Œå¦‚ä½•æŸ¥çœ‹æ—¥å¿—å‘¢ 12345678910$ cd /git/test/demo$ git log --statcommit ac01ff39a78fa388e1e628754fd55a76feb358d2 (HEAD -&gt; master)Author: smxknife &lt;2323937771@qq.com&gt;Date: Tue Mar 27 23:38:05 2018 +0800 init hellogit file hellogit | 1 + 1 file changed, 1 insertion(+) å¯ä»¥çœ‹åˆ°ä¿®æ”¹è®°å½• diffç°åœ¨å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ $ echo &quot;new change&quot; &gt;&gt; hellogit ä½¿ç”¨diffå‘½ä»¤è¿›è¡Œæ¯”è¾ƒ 12345678$ git diffdiff --git a/hellogit b/hellogitindex d974466..c49fee4 100644--- a/hellogit+++ b/hellogit@@ -1 +1,2 @@ Hello Git.+new change ä»ä¸Šé¢æ¥çœ‹ç¡®å®ä¿®æ”¹äº†ï¼Œä¹Ÿå­˜åœ¨å·®å¼‚ï¼Œé‚£ä¹ˆä¹…æäº¤å§ 123456$ git commit -m \"modify hellofile, add new change\"On branch masterChanges not staged for commit: modified: hellogitno changes added to commit ä»è¾“å‡ºç»“æœä¸Šçœ‹å¥½åƒæœ‰ç‚¹é—®é¢˜ï¼Œè²Œä¼¼æ²¡æäº¤æˆåŠŸï¼Œé€šè¿‡æ—¥å¿—æ¥çœ‹ 12$ git log --pretty=onelineac01ff39a78fa388e1e628754fd55a76feb358d2 (HEAD -&gt; master) init hellogit file æ—¥å¿—é‡Œä¹Ÿåªæœ‰ä¸€è¡Œè¾“å‡ºï¼ŒæŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ $ git statusæˆ–è€…$ git status -sï¼ˆç®€ç•¥è¾“å‡ºä¿¡æ¯ï¼‰è¾“å‡ºå¦‚ä¸‹ï¼š 12$ git status -s M hellogit æ— è®ºæ€ä¹ˆçœ‹éƒ½æ˜¯æäº¤å¤±è´¥ï¼Œä»€ä¹ˆåŸå› ï¼Ÿï¼Ÿï¼Ÿï¼Ÿè¿™å°±æ¶‰åŠåˆ°äº†æš‚å­˜åŒºçš„æ¦‚å¿µ æš‚å­˜åŒºï¼ˆstageï¼‰gitè§„å®šä¿®æ”¹æ–‡ä»¶ä¹‹åè¦å…ˆæ‰§è¡Œaddæ“ä½œï¼Œè™½ç„¶æ„Ÿè§‰å¾ˆåˆ«æ‰­ï¼Œä½†æ˜¯æ— å¥ˆåªèƒ½è¿™ä¹ˆåš $ git add hellogit å†ç”¨git diffä¼šå‘ç°æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼Œå†æ‰§è¡Œgit status -s 12$ git status -sM hellogit ä¹ä¸€çœ‹æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œä½†æ˜¯è¯·ä¸ä¸Šé¢å¯¹æ¯”æ¥çœ‹ï¼Œæ˜¯ä¸æ˜¯Mçš„ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨addæ“ä½œä¹‹å‰Mçš„ä½ç½®åœ¨ç¬¬äºŒåˆ—ï¼Œaddä¹‹åMçš„ä½ç½®ä¸ºç¬¬ä¸€åˆ— ç¬¬ä¸€åˆ—Mä»£è¡¨çš„å«ä¹‰æ˜¯ï¼šä»“åº“ä¸­çš„æ–‡ä»¶ä¸æš‚å­˜åŒºä¸­çš„æ–‡ä»¶ç›¸æ¯”æœ‰æ”¹åŠ¨ç¬¬äºŒåˆ—Mä»£è¡¨çš„å«ä¹‰æ˜¯ï¼šå·¥ä½œåŒºä¸­çš„å½“å‰æ–‡ä»¶ä¸æš‚å­˜åŒºçš„æ–‡ä»¶ç›¸æ¯”æœ‰æ”¹åŠ¨ é‚£ä¹ˆæ‰§è¡Œaddä¹‹å‰ï¼ŒMä½äºç¬¬äºŒåˆ—ï¼Œè¯´æ˜æ¯”è¾ƒçš„æ˜¯å·¥ä½œåŒºä¸æš‚å­˜åŒºï¼Œè€Œaddä¹‹åæ¯”è¾ƒçš„æ˜¯ä»“åº“ä¸æš‚å­˜åŒº ä»è¿™å¯ä»¥çœ‹å‡ºaddçš„ç›®çš„å°±æ˜¯å°†å·¥ä½œåŒºçš„æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº é‚£ä¹ˆå†ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶å†…å®¹ 1234567891011121314$ echo \"third change.\" &gt;&gt; hellogit $ git status -sMM hellogit$ git diffdiff --git a/hellogit b/hellogitindex c49fee4..990080f 100644--- a/hellogit+++ b/hellogit@@ -1,2 +1,3 @@ Hello Git. new change+third change. ä»ä¸Šé¢çš„ç»“æœæ¥çœ‹ï¼Œhellogitçš„statuså­˜åœ¨ä¸¤ä¸ªMï¼Œè¯´æ˜å·¥ä½œåŒºç›¸æ¯”æš‚å­˜åŒºæœ‰æ›´æ”¹ï¼Œæš‚å­˜åŒºç›¸æ¯”ä»“åº“æœ‰æ›´æ”¹ã€‚è€Œæ­¤æ—¶git diffå‘½ä»¤æœ‰è¾“å‡ºç»“æœäº†ï¼Œè¯´æ˜git diff é»˜è®¤æ˜¯å·¥ä½œåŒºä¸æš‚å­˜åŒºè¿›è¡Œæ¯”è¾ƒ ä»è¿™ä¸ªç»“æœæ¥çœ‹ï¼Œæ–‡ä»¶åœ¨Gitä¸­ä¼šå­˜åœ¨ä¸‰ç§çŠ¶æ€ï¼Œä»“åº“ä¸­çš„çŠ¶æ€ã€æš‚å­˜åŒºä¸­çš„çŠ¶æ€ã€å·¥ä½œåŒºä¸­çš„å½“å‰çŠ¶æ€ å°†å·¥ä½œåŒºå’ŒHEADï¼ˆå½“å‰å·¥ä½œåˆ†æ”¯ï¼‰ç›¸æ¯” 123456789$ git diff HEADdiff --git a/hellogit b/hellogitindex d974466..990080f 100644--- a/hellogit+++ b/hellogit@@ -1 +1,3 @@ Hello Git.+new change+third change. å°†æš‚å­˜åŒºå’Œä»“åº“ç›¸æ¯” ï¼ˆâ€“cachedæˆ–â€“stagedï¼‰ 1234567891011121314151617$ git diff --cacheddiff --git a/hellogit b/hellogitindex d974466..c49fee4 100644--- a/hellogit+++ b/hellogit@@ -1 +1,2 @@ Hello Git.+new change$ git diff --stageddiff --git a/hellogit b/hellogitindex d974466..c49fee4 100644--- a/hellogit+++ b/hellogit@@ -1 +1,2 @@ Hello Git.+new change å¥½äº†ï¼Œç°åœ¨è¿›è¡Œcommitæ“ä½œï¼Œé‚£ä¹ˆå°†ä¼šæäº¤çš„æ˜¯å“ªä¸ªç‰ˆæœ¬å‘¢ï¼Ÿ 123$ git commit -m \"which version checked in?\"[master 0789463] which version checked in? 1 file changed, 1 insertion(+) é€šè¿‡ä¸Šé¢æ¥çœ‹åªæœ‰ä¸€è¡Œæ’å…¥ï¼Œæ‰€ä»¥ä¸¤ä¸ªå˜åŒ–åªæäº¤äº†ä¸€ä¸ª å†é€šè¿‡ä¸€ç³»åˆ—å‘½ä»¤æ¥æŸ¥çœ‹ 12345678910111213141516171819202122232425$ git status -s M hellogit$ git diffdiff --git a/hellogit b/hellogitindex c49fee4..990080f 100644--- a/hellogit+++ b/hellogit@@ -1,2 +1,3 @@ Hello Git. new change+third change.$ git diff HEADdiff --git a/hellogit b/hellogitindex c49fee4..990080f 100644--- a/hellogit+++ b/hellogit@@ -1,2 +1,3 @@ Hello Git. new change+third change.$ git diff --staged# æ²¡æœ‰ä»»ä½•è¾“å‡º é€šè¿‡ä¸Šé¢ä¸€ç³»åˆ—çš„è¾“å‡ºæ¥çœ‹ï¼Œè¿™æ¬¡commitåªæäº¤äº†æš‚å­˜åŒºçš„æ–‡ä»¶ä¿®æ”¹ï¼Œå·¥ä½œåŒºçš„ä¾ç„¶æ²¡æœ‰å˜åŒ–ï¼Œæ‰€ä»¥ï¼Œæœ¬åœ°å·¥ä½œåŒºæ¯æ¬¡ä¿®æ”¹æ–‡ä»¶åéƒ½éœ€è¦å…ˆaddåˆ°æš‚å­˜åŒºï¼Œç„¶åå†commitåˆ°ä»“åº“ä¸­ã€‚é‚£ä¹ˆå°†æ‰€æœ‰çš„æ›´æ”¹å…ˆæäº¤åˆ°ä»“åº“å§ å‰é¢æåˆ°è¿‡.git/indexæ–‡ä»¶ï¼Œå…¶å®è¿™ä¸ªindexå°±æ˜¯æš‚å­˜åŒºæ–‡ä»¶ï¼Œå½“æ‰§è¡Œgit statusæ‰«æå·¥ä½œåŒºæ”¹åŠ¨çš„æ—¶å€™ï¼Œå…ˆæ ¹æ®.git/indexæ–‡ä»¶è®°å½•çš„æ—¶é—´æˆ³ã€é•¿åº¦ç­‰ä¿¡æ¯åˆ¤æ–­å·¥ä½œåŒºæ–‡ä»¶æ˜¯å¦æ”¹å˜ï¼Œå¦‚æœå·¥ä½œåŒºæ–‡ä»¶æ—¶é—´æˆ³æ”¹å˜äº†ï¼Œè¯´æ˜æ–‡ä»¶å†…å®¹å¯èƒ½è¢«æ”¹å˜äº†ï¼Œéœ€è¦æ‰“å¼€æ–‡ä»¶è¯»å–å†…å®¹ï¼Œä¸åŸå§‹æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¢«æ”¹å˜ã€‚å¦‚æœæ²¡æœ‰å˜åŒ–å°±å°†æ–°çš„æ—¶é—´æˆ³è®°å½•åˆ°.git/indexæ–‡ä»¶ä¸­ã€‚é€šè¿‡æ—¶é—´æˆ³å’Œæ–‡ä»¶é•¿åº¦æ¯”è¾ƒæ¯”æ–‡ä»¶å†…å®¹æ¯”è¾ƒå¿«çš„å¤šï¼Œè¿™æ­£æ˜¯gité«˜æ•ˆçš„åŸå› ä¹‹ä¸€ é€šè¿‡ä¸‹é¢çš„ä¸€å¼ å›¾æ¥å½¢è±¡çš„ç†è§£ä¸€ä¸‹å·¥ä½œåŒºã€æš‚å­˜åŒºã€ä»“åº“ï¼ˆç‰ˆæœ¬åº“ï¼‰çš„åŸç† indexå…¶å®å°±æ˜¯ä¸€ä¸ªç´¢å¼•ç›®å½•æ ‘ï¼Œè®°å½•äº†æ–‡ä»¶åå’Œæ–‡ä»¶çŠ¶æ€ä¿¡æ¯ï¼ˆæ—¶é—´æˆ³å’Œé•¿åº¦ï¼‰ï¼ŒçœŸæ­£çš„æ–‡ä»¶å†…å®¹æ˜¯å­˜å‚¨åœ¨.git/objectsç›®å½•ä¸­ $ git reset HEADé‡å†™æš‚å­˜åŒºçš„ç›®å½•æ ‘ï¼Œæ­¤æ—¶ä¼šè¢«masteråˆ†æ”¯æŒ‡å‘çš„ç›®å½•æ ‘æ›¿æ¢ï¼Œä½†æ˜¯ä¸å½±å“å·¥ä½œåŒº $ git rm --staged &lt;fileName&gt;ä¼šç›´æ¥ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶ï¼Œå·¥ä½œåŒºä¸å—å½±å“ $ git checkoutæˆ–$ git checkout -- &lt;fileName&gt; è¿™æ˜¯ä¸¤ä¸ªéå¸¸å±é™©çš„æ“ä½œï¼Œå‰è€…ä¼šå°†æš‚å­˜åŒºæ‰€æœ‰çš„æ–‡ä»¶æ›¿æ¢å·¥ä½œåŒºçš„æ–‡ä»¶ï¼Œåè€…æ˜¯æ›¿æ¢æŒ‡å®šçš„æ–‡ä»¶ã€‚è¿™ä¸¤ä¸ªæ“ä½œéƒ½ä¼šå¯¼è‡´å·¥ä½œåŒºä¿®æ”¹çš„ä¸”æœªæ·»åŠ çš„ä¿®æ”¹ä¸¢å¤±ï¼Œæ…é‡ï¼ï¼ï¼ $ git checkout HEADæˆ–$ git checkout -- &lt;fileName&gt;è¿™ä¸ªä¸ä¸Šé¢çš„ç±»ä¼¼ï¼Œä½†æ˜¯æ›´åŠ å±é™©ï¼Œä¼šç”¨ä»“åº“é‡Œé¢æ–‡ä»¶æ›¿æ¢æš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸¤ä¸ªåœ°æ–¹ ä¸€äº›å‘½ä»¤æŸ¥çœ‹HEADæŒ‡å‘çš„ç›®å½•æ ‘git ls-tree -l HEAD æ¸…ç†å·¥ä½œåŒºçªç„¶å‘ç°å·¥ä½œåŒºå¤ªä¹±äº†ï¼Œæ²¡æœ‰æœ‰ç”¨çš„ä¸œè¥¿éœ€è¦æ¸…ç† 12$ git clean -fd # æ¸…æ¥šå·¥ä½œåŒºä¸­æ²¡æœ‰åŠ å…¥ä»“åº“çš„æ–‡ä»¶å’Œç›®å½•$ git checkout . # ä½¿ç”¨æš‚å­˜åŒºè¿›è¡Œåˆ·æ–° æŸ¥çœ‹æš‚å­˜åŒºçš„ç›®å½•æ ‘git ls-files -s ä¸è¦ä½¿ç”¨git commit -aGitæä¾›äº†ä¸€ä¸ªç®€åŒ–å‘½ä»¤ï¼Œgit commit -a å‡å°‘äº†addçš„æ­¥éª¤ï¼Œå¯ä»¥ç›´æ¥å°†ä¿®æ”¹çš„æ–‡ä»¶è¿›è¡Œcommitï¼Œä½†æ˜¯æœªè¢«ç‰ˆæœ¬åº“è·Ÿè¸ªçš„æ–‡ä»¶æ—¶ä¸èƒ½æäº¤çš„ã€‚ è¿™æ ·åšç¡®å®ç®€åŒ–äº†æ“ä½œæ­¥éª¤ï¼Œä½†æ˜¯å°±ä¼šä¸¢æ‰Gitæš‚å­˜åŒºçš„æœ€å¤§å¥½å¤„ï¼šå¯¹æäº¤çš„å†…å®¹è¿›è¡Œæ§åˆ¶çš„èƒ½åŠ›","categories":[{"name":"gitæŒ‡å—","slug":"gitæŒ‡å—","permalink":"http://www.smxknife.com/categories/gitæŒ‡å—/"}],"tags":[{"name":"git","slug":"git","permalink":"http://www.smxknife.com/tags/git/"}]},{"title":"Gitä¹‹åˆå§‹åŒ–","slug":"Gitä¹‹åˆå§‹åŒ–","date":"2018-03-27T16:02:28.000Z","updated":"2018-03-27T16:33:31.605Z","comments":true,"path":"2018/03/28/Gitä¹‹åˆå§‹åŒ–/","link":"","permalink":"http://www.smxknife.com/2018/03/28/Gitä¹‹åˆå§‹åŒ–/","excerpt":"","text":"å‰è¨€æœ¬æ–‡æ˜¯å¯¹ã€ŠGitæƒå¨æŒ‡å—ã€‹çš„ç®€å•è®°å½•ï¼Œå¦‚æœçœ‹è¿‡åŸè‘—å¯ä»¥ç»•è¿‡ PSï¼šåŒ…æ‹¬åé¢çš„Gitä¹‹ç³»åˆ—çš„æ–‡ç« éƒ½å¯ä»¥ç»•é“è€Œè¡Œ ç‰ˆæœ¬git --versionç”¨æ¥æŸ¥è¯¢å½“å‰æœºå™¨ä¸Šçš„gitçš„ç‰ˆæœ¬å· é…ç½®å˜é‡gitçš„é…ç½®å˜é‡æ˜¯ä¸€æ¬¡æ€§å·¥ä½œï¼Œè¿™äº›è®¾ç½®ä¼šåœ¨å…¨å±€æ–‡ä»¶ï¼ˆç”¨æˆ·ç›®å½•ä¸‹çš„.gitconfigï¼‰æˆ–ç³»ç»Ÿæ–‡ä»¶ï¼ˆå¦‚/etc/gitconfigï¼‰ä¸­è®°å½• ç”¨æˆ·åå’Œé‚®ä»¶$ git config --global user.name &quot;smxknife&quot;$ git config --global user.email smxknife@qq.com ä¸Šé¢ä¸¤æ¡å‘½ä»¤åˆ†åˆ«ç”¨æ¥é…ç½®å½“å‰ç”¨æˆ·çš„å§“åå’Œé‚®ä»¶åœ°å€ï¼Œè¿™å°†ä¼šåœ¨ç‰ˆæœ¬åº“æäº¤æ—¶ç”¨åˆ° åˆ«åè®¾ç½®åˆ«åæ˜¯ä¸ºäº†å‘½ä»¤æ“ä½œæ›´çˆ½ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œè¾“å…¥git ciçˆ½è¿˜æ˜¯è¾“å…¥git commitçˆ½ï¼Œï¼ˆæ³¨ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ï¼Œé‚£ä¹ˆè®¾ç½®çš„åˆ«åå¯ä»¥è¢«æ‰€æœ‰äººå‘˜ä½¿ç”¨ï¼‰ 1234$ sudo git config --system alias.st status$ sudo git config --system alias.ci commit$ sudo git config --system alias.co checkout$ sudo git config --system alias.br branch ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼Œåªè®¾ç½®å½“å‰ç”¨æˆ·çš„å…¨å±€æ–¹å¼ 1234$ git config --global alias.st status$ git config --global alias.ci commit$ git config --global alias.co checkout$ git config --global alias.br branch å‘½ä»¤è¡Œé¢œè‰²è®¾ç½®$ git config --global color.ui true åˆå§‹åŒ–gitåˆå§‹åŒ–å‘½ä»¤éå¸¸ç®€å•git init $ cd /git/test $ git init demo è¿™æ ·åˆå§‹åŒ–å·²ç»åšå¥½äº†ï¼Œåœ¨demoä¸‹ä¼šæœ‰ä¸€ä¸ª.gitæ–‡ä»¶ï¼Œè¿™ä¸ªéšè—çš„.gitå°±æ˜¯Gitçš„ä»“åº“ï¼Œè€Œ/git/test/demoè¢«ç§°ä¸ºå·¥ä½œåŒº æäº¤å†…å®¹æ–°å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ 12$ cd /git/test/demo/$ echo \"Hello Git.\" &gt; hellogit å°†hellogitæ·»åŠ åˆ°ä»“åº“ 12$ git add hellogit # æ­¤æ—¶å¹¶æ²¡æœ‰æäº¤ï¼Œè¿™ä¸svnæ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦æ‰§è¡Œä¸‹ä¸€æ­¥commitæ‰ç®—æäº¤$ git commit -m \"init hellogit file\" æ‰§è¡Œå®Œæ¯•ä¹‹åä¼šå¾—åˆ°ä»¥ä¸‹è¾“å‡º 123[master (root-commit) ac01ff3] init hellogit file 1 file changed, 1 insertion(+) create mode 100644 hellogit ä»ç»“æœä¸Šçœ‹æäº¤åˆ°masteråˆ†æ”¯ä¸Šï¼Œç¬¬ä¸€ä¸ªæäº¤ä¸ºroot-commitï¼Œæäº¤IDä¸ºac01ff3ï¼Œç¬¬äºŒè¡Œæ­¤æ¬¡ä¿®æ”¹äº†ä¸€ä¸ªæ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸€è¡Œæ’å…¥ç¬¬ä¸‰è¡Œæ­¤æ¬¡æäº¤åˆ›å»ºäº†æ–°æ–‡ä»¶ hellogit .gitgitæä¾›äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„å‘½ä»¤ç”¨æ¥è¿›è¡Œæœç´¢ $ git grep &quot;æ–‡ä»¶å†…å®¹æœç´¢&quot; å¦‚ 12$ git grep \"Hello\"hellogit:Hello Git. .git/indexæ–‡ä»¶è®°å½•å·¥ä½œåŒºæ–‡ä»¶çš„çŠ¶æ€ï¼ˆå®é™…ä¸Šæ˜¯æš‚å­˜åŒºçš„çŠ¶æ€ï¼‰ gitå‘½ä»¤æ˜¯åœ¨å·¥ä½œåŒºå·¥ä½œçš„ï¼Œå¦‚æœåœ¨å·¥ä½œåŒºçš„å­ç›®å½•ä¸‹ï¼Œgitä¼šä¸€ç›´é€’å½’æŸ¥æ‰¾.gitç›®å½•ï¼Œå¦‚æœæ‰€æœ‰çš„ç›®å½•ä¸­é€’å½’æ— æ³•æ‰¾åˆ°ï¼Œå°†ä¼šæŠ¥é”™ã€‚é‚£ä¹ˆå¦‚ä½•å®šä½.gitçš„å·¥ä½œåŒºçš„æ ¹ç›®å½•å‘¢ï¼Ÿ $ git rev-parse --git-dir æ˜¾ç¤ºå·¥ä½œåŒºæ ¹ç›®å½• $ git rev-parse --show-toplevel ç›¸å¯¹å·¥ä½œåŒºæ ¹ç›®å½•çš„ç›¸å¯¹ç›®å½• $ git rev-parse --show-prefix æ˜¾ç¤ºæ¡£æœŸç›®å½•åé€€åˆ°å·¥ä½œåŒºæ ¹ç›®å½•çš„æ·±åº¦ $ git rev-parse --show-cdup","categories":[{"name":"gitæŒ‡å—","slug":"gitæŒ‡å—","permalink":"http://www.smxknife.com/categories/gitæŒ‡å—/"}],"tags":[{"name":"git","slug":"git","permalink":"http://www.smxknife.com/tags/git/"}]},{"title":"Javaæ‹†ç®±/è£…ç®±åŸç†","slug":"Javaæ‹†ç®±-è£…ç®±åŸç†","date":"2018-03-21T20:25:04.000Z","updated":"2018-03-21T20:25:57.000Z","comments":true,"path":"2018/03/22/Javaæ‹†ç®±-è£…ç®±åŸç†/","link":"","permalink":"http://www.smxknife.com/2018/03/22/Javaæ‹†ç®±-è£…ç®±åŸç†/","excerpt":"","text":"javaä¸­åŸå§‹æ•°æ®ç±»å‹byte =&gt; Byte short =&gt; Short chart =&gt; Character int =&gt; Integer float =&gt; Float long =&gt; Long double =&gt; Double boolean =&gt; Boolean ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±è‡ªåŠ¨è£…ç®±å°±æ˜¯è‡ªåŠ¨å°†åŸå§‹æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¯¹åº”çš„å¯¹è±¡ç±»å‹ï¼ˆç¼–è¯‘å™¨ç¼–è¯‘æ—¶è°ƒç”¨valueOfå°†åŸå§‹ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡ï¼‰è‡ªåŠ¨æ‹†ç®±å°±æ˜¯è‡ªåŠ¨å°†å¯¹è±¡ç±»å‹è½¬æ¢ä¸ºåŸå§‹æ•°æ®ç±»å‹ï¼ˆç¼–è¯‘å™¨ç¼–è¯‘æ—¶è°ƒç”¨ç±»ä¼¼äºintValue()ã€doubleValue()æ–¹æ³•å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼ï¼‰ 1234// è‡ªåŠ¨è£…ç®±Integer i = 1;// è‡ªåŠ¨æ‹†ç®±int j = i; è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±çš„æ—¶æœºèµ‹å€¼æ—¶1234// è‡ªåŠ¨è£…ç®±Integer i = 1;// è‡ªåŠ¨æ‹†ç®±int j = i; æ–¹æ³•è°ƒç”¨ä¼ å€¼æ—¶1234public void test(Integer i) &#123; ...&#125;test(1); è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±çš„å¼Šç«¯è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±çœ‹ä¼¼ç®€å•æ–¹ä¾¿ï¼ˆç”¨ç€ä¹Ÿç¡®å®æ–¹ä¾¿ï¼‰ï¼Œä½†æ˜¯å´éšè—ç€ä¸€äº›å¼Šç«¯ å½±å“æ€§èƒ½åœ¨æ•°æ®é‡å°çš„æ—¶å€™å¯èƒ½æ²¡æœ‰å¤ªå¤§çš„å½±å“ï¼Œä½†æ˜¯éšç€æ•°æ®é‡çš„å¢å¤šå°±ä¼šé¢å¤–çš„åˆ›å»ºè®¸å¤šæ— æ„ä¹‰çš„å¯¹è±¡ï¼Œä»¥åŠæ•°æ®è½¬æ¢çš„è¿‡ç¨‹ 1234Integer sum = 0ï¼›for(int i = 0; i &lt; 100000; i++) &#123; sum += i;&#125; å› ä¸ºsumæ˜¯Integerå¯¹è±¡ï¼Œä¸æ”¯æŒ += æ“ä½œï¼Œæ‰€ä»¥å¾ªç¯ä¸­ä¼šè¿›è¡Œç±»ä¼¼å¦‚ä¸‹çš„è‡ªåŠ¨çš„æ‹†ç®±å†è£…ç®±çš„è¿‡ç¨‹ï¼š 12sum = sum.intValue() + i;sum = Integer.valueOf(sum); NullPointerException12Integer a = null;int b = a; ä¸Šé¢çš„ä»£ç å°±ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ == åˆ¤æ–­é—®é¢˜ï¼ˆç¼“å­˜é—®é¢˜ï¼‰è¿™ä¸ªåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æœ‰ä»‹ç»ã€ŠLong == Long æœ‰è¶£çš„ç°è±¡ã€‹ é‡è½½ä¸è‡ªåŠ¨æ‹†ç®±ã€è£…ç®±å½“é‡è½½é‡ä¸Šè‡ªåŠ¨è£…ç®±æ—¶ï¼Œæƒ…å†µä¼šæ¯”è¾ƒæœ‰äº›å¤æ‚ï¼Œå¯èƒ½ä¼šè®©äººäº§ç”Ÿæœ‰äº›å›°æƒ‘ã€‚åœ¨1.5ä¹‹å‰ï¼Œvalue(int)å’Œvalue(Integer)æ˜¯å®Œå…¨ä¸ç›¸åŒçš„æ–¹æ³•ï¼Œå¼€å‘è€…ä¸ä¼šå› ä¸ºä¼ å…¥æ˜¯intè¿˜æ˜¯Integerè°ƒç”¨å“ªä¸ªæ–¹æ³•å›°æƒ‘ï¼Œä½†æ˜¯ç”±äºè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„å¼•å…¥ï¼Œå¤„ç†é‡è½½æ–¹æ³•æ—¶ç¨å¾®æœ‰ç‚¹å¤æ‚ã€‚ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯ArrayListçš„removeæ–¹æ³•ï¼Œå®ƒæœ‰remove(index)å’Œremove(Object)ä¸¤ç§é‡è½½ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰ä¸€ç‚¹å°å°çš„å›°æƒ‘ï¼Œå…¶å®è¿™ç§å›°æƒ‘æ˜¯å¯ä»¥éªŒè¯å¹¶è§£å¼€çš„ï¼Œå½“å‡ºç°è¿™ç§æƒ…å†µæ—¶ï¼Œä¸ä¼šå‘ç”Ÿè‡ªåŠ¨è£…ç®±æ“ä½œã€‚ 1234567891011// demo1public static void test1(int i) &#123; System.out.println(\"int\");&#125;public static void test1(Integer i) &#123; System.out.println(\"integer\");&#125;test1(1);test1(Integer.valueOf(1)); è¾“å‡ºç»“æœä¸ºï¼š int integer // demo2 public static void test1(int i) { System.out.println(\"int\"); } //public static void test1(Integer i) { // System.out.println(\"integer\"); //} test1(1); test1(Integer.valueOf(1)); è¾“å‡ºç»“æœä¸ºï¼š int int","categories":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/tags/java/"},{"name":"è‡ªåŠ¨æ‹†ç®±","slug":"è‡ªåŠ¨æ‹†ç®±","permalink":"http://www.smxknife.com/tags/è‡ªåŠ¨æ‹†ç®±/"}]},{"title":"Javaåºåˆ—åŒ–","slug":"Javaåºåˆ—åŒ–","date":"2018-03-21T20:24:25.000Z","updated":"2018-03-21T20:24:46.062Z","comments":true,"path":"2018/03/22/Javaåºåˆ—åŒ–/","link":"","permalink":"http://www.smxknife.com/2018/03/22/Javaåºåˆ—åŒ–/","excerpt":"","text":"åºåˆ—åŒ–å°±æ˜¯å°†å¯¹è±¡è¡¨ç¤ºä¸ºä¸€ä¸ªå­—èŠ‚åºåˆ—ï¼ŒåŒ…æ‹¬äº†è¯¥å¯¹è±¡çš„æ•°æ®ï¼Œæœ‰å…³å¯¹è±¡çš„ç±»å‹ä¿¡æ¯å’Œå­˜å‚¨åœ¨å¯¹è±¡ä¸­æ•°æ®çš„ç±»å‹ã€‚ åºåˆ—åŒ–å¯¹è±¡å†™å…¥æ–‡ä»¶ä¹‹åï¼Œå¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–å‡ºæ¥ï¼Œå¹¶è¿›è¡Œååºåˆ—åŒ–ï¼Œåœ¨å†…å­˜ä¸­æ–°å»ºå¯¹è±¡ã€‚ ObjectInputStreamå’ŒObjectOutputStreamjavaä¸­åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å…³é”®çš„ä¸¤ä¸ªæ–¹ç±»æ˜¯ObjectInputStreamå’ŒObjectOutputStreamç±» 123// ObjectOutputStreamæä¾›äº†ä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡ï¼Œå¹¶è¾“å‡ºåˆ°æµçš„æ–¹æ³•public final void writeObject(Object x) throws IOException 123// ObjectInputStreamæä¾›äº†ä¸€ä¸ªä»æµä¸­è¯»å–å¯¹è±¡ï¼Œå¹¶ååºåˆ—åŒ–çš„æ–¹æ³•public final Object readObject() throws IOException, ClassNotFoundException ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172public class Employee implements Serializable &#123; private static final long serialVersionUID = 1L; public String name; public String address; public transient int SSN; public int number; public void mailCheck() &#123; System.out.println(\"Mailing a check to \" + name + \" \" + address); &#125;&#125;public class SerializeDemo &#123; public static void main(String[] args) &#123; Employee e = new Employee(); e.name = \"test\"; e.address = \"hangzhou\"; e.SSN = 12345678; e.number = 110; try &#123; FileOutputStream fos = new FileOutputStream(\"./employee.ser\"); ObjectOutputStream oos = new ObjectOutputStream(fos); oos.writeObject(e); oos.close(); fos.close(); System.out.println(\"saved\"); &#125; catch (FileNotFoundException e1) &#123; e1.printStackTrace(); &#125; catch (IOException e1) &#123; e1.printStackTrace(); &#125; &#125;&#125;public class DeserializeDemo &#123; public static void main(String[] args) &#123; Employee e = null; try &#123; FileInputStream fis = new FileInputStream(\"./employee.ser\"); ObjectInputStream ois = new ObjectInputStream(fis); e = (Employee) ois.readObject(); ois.close(); fis.close(); &#125; catch (FileNotFoundException e1) &#123; e1.printStackTrace(); &#125; catch (IOException e1) &#123; e1.printStackTrace(); &#125; catch (ClassNotFoundException e1) &#123; System.out.println(\"employee class not found\"); e1.printStackTrace(); &#125; System.out.println(\"Deserialized Employee...\"); System.out.println(\"Name: \" + e.name); System.out.println(\"Address: \" + e.address); System.out.println(\"SSN: \" + e.SSN); System.out.println(\"Number: \" + e.number); &#125;&#125;// è¾“å‡ºç»“æœDeserialized Employee...Name: testAddress: hangzhouSSN: 0Number: 110 æ·±å…¥æ€è€ƒä¸Šé¢å°±æ˜¯åºåˆ—åŒ–çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›ç»†èŠ‚ä»ç„¶éœ€è¦æ³¨æ„ åºåˆ—å·é—®é¢˜å¦‚æœEmployeeä¸­ä¸æ˜¾å¼çš„å†™åºåˆ—å·ï¼Œé‚£ä¹ˆä¼šå¾ˆå®¹æ˜“å‡ºç°å„ç§è«åå…¶å¦™çš„é—®é¢˜ï¼Œåºåˆ—å·æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„ï¼Œæ‰€ä»¥å¦‚æœå½“å¯¹è±¡åºåˆ—åŒ–å®Œæˆä¹‹åï¼Œçªç„¶æ”¹äº†ä¸€ç‚¹å¯¹è±¡çš„å†…å®¹ï¼Œé‡æ–°ç¼–è¯‘åï¼Œæ²¡æœ‰å†æ¬¡é‡æ–°çš„åºåˆ—åŒ–ç›´æ¥å°±ååºåˆ—åŒ–ï¼Œè¿™æ—¶å€™è‚¯å®šä¼šå‡ºé”™ï¼Œå› ä¸ºåºåˆ—å·å˜äº†ï¼Œåºåˆ—å·å…¶å®å°±ç›¸å½“äºç‰ˆæœ¬æ§åˆ¶ï¼Œæ”¹å˜çš„å¯¹è±¡ä¹‹åï¼Œç‰ˆæœ¬å·è‚¯å®šè¦å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æœ‰æ—¶ä¸ºäº†é¿å…è¯¥é—®é¢˜ï¼Œæœ€å¥½æ‰‹åŠ¨æ·»åŠ åºåˆ—å· é™æ€å±æ€§åºåˆ—åŒ–å¯¹Employeeå¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ ä¸€ä¸ªé™æ€å±æ€§åœ¨å®ä¾‹åŒ–ä¹‹åï¼Œæ›´æ”¹é™æ€å±æ€§çš„å€¼ï¼Œå†ååºåˆ—åŒ–ï¼Œè¾“å‡ºé™æ€å±æ€§çš„å€¼ï¼Œå¾—åˆ°çš„å´æ˜¯æ›´æ”¹åçš„å€¼ã€‚ è¿™é‡Œé¢çš„åŸå› å…¶å®æ˜¾è€Œæ˜“è§ï¼Œåºåˆ—åŒ–æ˜¯å¯¹å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ï¼Œè€Œstaticæ˜¯ç±»çš„å±æ€§ï¼Œæ‰€ä»¥ä¸ä¼šå¯¹é™æ€æˆå‘˜è¿›è¡Œåºåˆ—åŒ–ï¼Œè¯»å–è¯¥å¯¹è±¡çš„å€¼ï¼Œè·å–çš„æ˜¯ç±»çš„å±æ€§å€¼ã€‚å› æ­¤ åºåˆ—åŒ–å¹¶ä¸ä¿å­˜é™æ€å±æ€§ã€‚ çˆ¶ç±»åºåˆ—åŒ–å¦‚æœå­ç±»å®ç°äº†Serializableæ¥å£ï¼Œçˆ¶ç±»æ²¡æœ‰å®ç°Serializableæ¥å£ï¼Œé‚£ä¹ˆå°†å­ç±»è¿›è¡Œåºåˆ—åŒ–ä¹‹åï¼Œååºåˆ—åŒ–ä¹‹åè·å–çš„å€¼ï¼Œçˆ¶ç±»çš„å±æ€§å€¼å…¨éƒ¨å˜ä¸ºæˆå‘˜å˜é‡å¯¹åº”ç±»å‹çš„é»˜è®¤å€¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class Animal &#123; public String name; public int type;&#125;public class Cat extends Animal implements Serializable &#123; public String color;&#125;public class ExtendsSerDeserDemo &#123; public static void main(String[] args) &#123; Cat cat = new Cat(); cat.name = \"bosi\"; cat.type = 0; cat.color = \"yellow\"; try &#123; FileOutputStream fos = new FileOutputStream(\"./cat.ser\"); ObjectOutputStream oos = new ObjectOutputStream(fos); oos.writeObject(cat); oos.close(); fos.close(); System.out.println(\"saved\"); FileInputStream fis = new FileInputStream(\"./cat.ser\"); ObjectInputStream ois = new ObjectInputStream(fis); Cat cat1 = (Cat) ois.readObject(); ois.close(); fis.close(); System.out.println(cat1.name); System.out.println(cat1.type); System.out.println(cat1.color); &#125; catch (FileNotFoundException e1) &#123; e1.printStackTrace(); &#125; catch (IOException e1) &#123; e1.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125;// è¾“å‡ºç»“æœnull0yellow è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯ï¼Œå¦‚æœæ²¡æœ‰å®ç°Serializableæ¥å£ï¼Œé‚£ä¹ˆçˆ¶ç±»å¿…é¡»å«æœ‰æ— æƒ¨çš„æ„é€ å‡½æ•°ï¼Œå¦åˆ™åœ¨ååºåˆ—åŒ–æ—¶ä¼šæŠ¥é”™ ä¸Šé¢æœ‰è¿™ä¹ˆå¤šé—®é¢˜ï¼Œå…¶å®è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œå°†çˆ¶ç±»ä¹Ÿå®ç°Serializableæ¥å£å³å¯ Transientå…³é”®å­—è¯¥å…³é”®å­—çš„ä½¿ç”¨æ–¹æ³•åœ¨ä¸Šé¢å·²ç»æœ‰å‡ºç°è¿‡ï¼ŒEmployeeé‡Œé¢çš„SSNå±æ€§ï¼Œä½¿ç”¨æ–¹æ³•å°±æ˜¯åœ¨å±æ€§å‰åŠ ä¸Štransientå³å¯ï¼Œè¿™æ ·å°±å¯ä»¥é˜»æ­¢è¯¥å±æ€§è¢«åºåˆ—åŒ–ã€‚åœ¨ååºåˆ—åŒ–æ—¶ä¼šå°†è¯¥å±æ€§çš„å€¼ç›´æ¥è®¾ç½®ä¸ºåˆå§‹å€¼ è™šæ‹Ÿæœºè°ƒç”¨åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œè™šæ‹Ÿæœºä¼šè¯•å›¾è°ƒç”¨å¯¹è±¡é‡Œé¢çš„writeObjectå’ŒreadObjectæ–¹æ³•ï¼Œè¿›è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤è°ƒç”¨ObjectInputStreamé‡Œé¢çš„defaultReadObjectå’ŒObjectOutputStreamé‡Œé¢çš„defaultWriteObjectæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536public class Cat extends Animal implements Serializable &#123; public String color; public Cat() &#123; super(1); &#125; private void writeObject(ObjectOutputStream out) &#123; try &#123; ObjectOutputStream.PutField putField = out.putFields(); System.out.println(\"åŸå§‹é¢œè‰²ï¼š \" + color); color = \"åŠ å¯†äº†\"; System.out.println(\"åŠ å¯†åçš„é¢œè‰²ï¼š \" + color); putField.put(\"color\", color); out.writeFields(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; private void readObject(ObjectInputStream in) &#123; try &#123; ObjectInputStream.GetField getField = in.readFields(); Object color = getField.get(\"color\", \"\"); System.out.println(\"è§£å¯†å‰çš„é¢œè‰²ï¼š \" + color); color = \"yellow\"; System.out.println(\"è§£å¯†åçš„é¢œè‰²ï¼š \" + color); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/tags/java/"},{"name":"åºåˆ—åŒ–","slug":"åºåˆ—åŒ–","permalink":"http://www.smxknife.com/tags/åºåˆ—åŒ–/"}]},{"title":"Javaå¥‡æ•°ç‰¹æ€§","slug":"Javaå¥‡æ•°ç‰¹æ€§","date":"2018-03-21T20:23:30.000Z","updated":"2018-03-21T20:24:05.401Z","comments":true,"path":"2018/03/22/Javaå¥‡æ•°ç‰¹æ€§/","link":"","permalink":"http://www.smxknife.com/2018/03/22/Javaå¥‡æ•°ç‰¹æ€§/","excerpt":"","text":"åœ¨æŸäº›æ—¶å€™ï¼Œå‡ºäºæŸäº›ç›®çš„å¯èƒ½ä¼šè¦æ±‚è¿›è¡Œä¸€äº›å¥‡æ•°æ€§çš„åˆ¤æ–­ï¼Œå¦‚æœä½ æ˜¯newerï¼Œå¾ˆæœ‰å¯èƒ½å› ä¸ºç»éªŒçš„ä¸è¶³é€ æˆä¸€äº›åœ¨åæœŸè®©äººéš¾ä»¥å‘ç°çš„çš„bugã€‚ å¦‚ä½•è¿›è¡Œå¥‡æ•°åˆ¤æ–­æœ‰å¯èƒ½ä½ ä¼šè¿™ä¹ˆå†™ 123public static boolean isOdd(int i) &#123; return i % 2 == 1;&#125; ä¹Ÿæœ‰å¯èƒ½ä½ ä¼šè¿™ä¹ˆå†™ 123public static boolean isOdd(int i) &#123; return i % 2 != 0;&#125; å¦‚æœä½ é€‰æ‹©äº†ç¬¬ä¸€ç§çš„å†™æ³•ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ ä¸­æ ‡äº†ï¼Œåœ¨æœªæ¥çš„æŸäº›æ—¶å€™bugä¼šæ‰¾åˆ°ä½ ï¼Œè€Œç”¨ç¬¬äºŒç§çš„å°±æ²¡æœ‰é—®é¢˜ã€‚ ç°åœ¨è¿˜æ²¡å‘ç°é—®é¢˜çš„äººï¼Œé‚£ä¹ˆä½ å¯èƒ½æ˜¯å¿½ç•¥äº†è´Ÿæ•°çš„æƒ…å†µï¼Œ-1 % 2 ç­‰äº -1è€Œä¸æ˜¯1 è¿è¡Œä¸‹é¢ä»£ç å°±èƒ½å‘ç°é—®é¢˜ï¼š 1234567891011121314151617181920212223242526272829303132333435public class OddDemo2 &#123; public static void main(String[] args) &#123; for (int i = -10; i &lt; 10; i++) &#123; mod2(i); &#125; &#125; public static void mod2(int i) &#123; System.out.println(i + \" % 2 = \" + (i % 2)); &#125;&#125;// ç»“æœè¾“å‡ºï¼š-10 % 2 = 0-9 % 2 = -1-8 % 2 = 0-7 % 2 = -1-6 % 2 = 0-5 % 2 = -1-4 % 2 = 0-3 % 2 = -1-2 % 2 = 0-1 % 2 = -10 % 2 = 01 % 2 = 12 % 2 = 03 % 2 = 14 % 2 = 05 % 2 = 16 % 2 = 07 % 2 = 18 % 2 = 09 % 2 = 1 ä½è¿ç®—åˆ¤æ–­æ³•åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»å¯ä»¥è§£å†³å¥‡æ•°æ€§çš„é—®é¢˜ï¼Œè¿™å®Œå…¨æ˜¯ä¸ªç»éªŒé—®é¢˜ï¼Œé‚£ä¹ˆä¸‹é¢å†ä»‹ç»ä¸€ç§æ€§èƒ½æ›´é«˜ä¸€ç‚¹çš„ï¼Œæ›´åŠ é«˜å¤§ä¸Šçš„ä¸€ç§åˆ¤æ–­æ–¹æ³•ï¼šä½è¿ç®—æ³• ä»£ç å¦‚ä¸‹ï¼š 123public static boolean isOdd2(int i) &#123; return (i &amp; 2) == 1;&#125; æ˜¯å¦çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯å¯¹äºä¸ç†Ÿæ‚‰ä½è¿ç®—çš„äººæ¥è¯´çœ‹ç€ä½ å¾ˆç‰›æ°ğŸ˜‚ ä½è¿ç®—åˆ¤æ–­æ³•è§£æâ€œ&amp;â€å¯¹äºjavaå¼€å‘è€…æ¥è¯´ï¼Œä½ å¯ä»¥ä¸ç†Ÿæ‚‰ï¼Œä½†æ˜¯ä½ ä¸å¯ä»¥åšåˆ°ä¸çŸ¥é“ï¼Œè¿™æ˜¯ä»€ä¹ˆï¼Œè¿ç®—è§„åˆ™æ˜¯ä»€ä¹ˆ &amp; æŒ‰ä½ä¸ï¼Œå°†æ•°å­—è½¬åŒ–ä¸ºäºŒè¿›åˆ¶ä¹‹åï¼Œåªæœ‰ä¸¤ä¸ªæ“ä½œæ•°å¯¹åº”ä½åŒä¸º1æ—¶ï¼Œç»“æœä¸º1ï¼Œå…¶ä½™å…¨ä¸º0 è¿™é‡Œå°±éœ€è¦å¼•å…¥åŸç ï¼Œåç ï¼Œè¡¥ç ä¸‰ä¸ªæ¦‚å¿µï¼Œç®€å•ä»‹ç»ï¼š æ­£æ•°çš„åŸç ã€åç ã€è¡¥ç æ˜¯ä¸€æ ·çš„ è´Ÿæ•°çš„åç ç­‰äºåŸç çš„ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½æŒ‰ä½å–åï¼Œè¡¥ç ç­‰äºåç åŠ ä¸€ å¯¹äºä½è¿ç®—ä¸ç†Ÿæ‚‰çš„çŒ¿å‹æ¥è¯´ï¼Œéœ€è¦ç¨å¾®æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè®¡ç®—æœºä¸­éƒ½æ˜¯é‡‡ç”¨è¡¥ç æ¥è¿›è¡Œè®¡ç®— å¼€å§‹è§£æï¼Œä»¥3å’Œ-3ä¸ºä¾‹ [1]åŸ = [1]å = [1]è¡¥ = 00000000 00000000 00000000 00000001 [3]åŸ = [3]å = [3]è¡¥ = 00000000 00000000 00000000 00000011 [-3]åŸ = 10000000 00000000 00000000 00000011[-3]å = 11111111 11111111 11111111 11111100[-3]è¡¥ = 11111111 11111111 11111111 11111101 1 &amp; 3 ç»“æœä¸º 00000000 00000000 00000000 00000001ï¼Œå¾ˆæ˜æ˜¾ä¸º1 1 &amp; -3 ç»“æœè®¡ç®—ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä¸Šé¢è¯´äº†ç”¨è¡¥ç è¿›è¡Œè¿ç®—ï¼Œæ‰€ä»¥è¡¥ç è¿ç®—ç»“æœä¸º00000000 00000000 00000000 00000001 ç»“æœä¾ç„¶ä¸º1 å¾ˆæ˜æ˜¾é€šè¿‡è¿™ç§æ–¹å¼å°±å±è”½äº†æ­£è´Ÿæ•°çš„åŸå› é€ æˆçš„bugï¼Œè¿˜è·å¾—äº†æ›´é«˜çš„æ€§èƒ½ã€‚","categories":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/tags/java/"}]},{"title":"SpringBootä¹‹é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§","slug":"SpringBootä¹‹é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§","date":"2018-03-21T20:22:30.000Z","updated":"2018-03-21T20:22:51.166Z","comments":true,"path":"2018/03/22/SpringBootä¹‹é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§/","link":"","permalink":"http://www.smxknife.com/2018/03/22/SpringBootä¹‹é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§/","excerpt":"","text":"ç®€ä»‹application.propertieså’Œapplication.yml è¿™æ˜¯å¸¸ç”¨çš„é…ç½®æ–‡ä»¶å‘½åï¼Œå¤§å®¶åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ã€‚ä½†æ˜¯å®ƒä»¬çš„ä¼˜å…ˆçº§åˆ°åº•å“ªä¸ªæ›´é«˜å‘¢ï¼Ÿä¸‹é¢å°±å¼€å§‹åšè¯•éªŒã€‚éƒ½ä»¥server.portæ¥æµ‹è¯• properties vs yml- resources - application.properties # 8081 - application.yml # 8082 é€šè¿‡ç®€å•çš„å¯åŠ¨è¯•éªŒå‘ç° properties &gt; yml classpath: vs classpath:/config- resources - application.properties # 8081 - /config/application.properties # 8082 å¯åŠ¨å‘ç° classpath:/config &gt; classpath classpath:/config/yml vs classpath:propertiesé€šè¿‡ä¸Šé¢å‘ç°propertiesçš„ä¼˜å…ˆçº§å¤§äºymlï¼Œconfigçš„ä¼˜å…ˆçº§å¤§äºclasspathï¼Œé‚£ä¹ˆconfigä¸‹é¢çš„ymlä¸classpathä¸‹é¢çš„propertieså¯¹æ¯”å¦‚ä½•å‘¢ï¼Ÿ - resources - application.properties # 8081 - /config/application.yml # 8082 å¯åŠ¨å‘ç° classpath:/config/yml &gt; classpath:propertiesé€šè¿‡è¿™ä¸ªè¯•éªŒå¯ä»¥å‘ç°ï¼Œä½ç½®çš„ä¼˜å…ˆçº§å¤§äºå‘½åçš„ä¼˜å…ˆçº§ properties vs -profile.propertiesapplication.properties ä¸ application-{profile}.properties é»˜è®¤çš„profileä¸ºdefaultï¼Œé‚£ä¹ˆä¹…å…ˆå¯¹æ¯”application.properties ä¸ applicaation-default.properties çš„ä¼˜å…ˆçº§ - resources - application.properties # 8081 - application-default.properties # 8082 å¯åŠ¨å‘ç°ï¼Œapplication-default.properties &gt; application.properties properties vs -profile.ymlä¸ä¸Šé¢çš„è¯•éªŒç±»ä¼¼ï¼Œå°†application-default.propertiesæ›¿æ¢ä¸ºapplication-default.yml - resources - application.properties # 8081 - application-default.yml # 8082 å¯åŠ¨å‘ç°ï¼Œapplication-default.yml &gt; application.propertiesæ‰€ä»¥ï¼ŒåŠ ä¸Š-defaultçš„profileå±æ€§æ—¶ï¼Œymlå°†ä¼šå¤§äºä¸åŠ profileçš„propertiesï¼Œå½“ç„¶å¦‚æœåŒæ—¶åŠ ä¸Šprofileçš„å±æ€§ï¼Œé‚£ä¹ˆpropertiesä¾ç„¶ä¼šå¤§äºyml classpath:/config/properties vs classpath:application-default.ymlé€šè¿‡å‰é¢çš„å®éªŒå‘ç°configçš„ä¼˜å…ˆçº§è¿˜æ˜¯è›®é«˜çš„ï¼Œä½†æ˜¯ä¸defaultç›¸æ¯”è°é«˜å‘¢ï¼Ÿ - resources - application-default.yml # 8081 - /config/application.properties # 8082 å¯åŠ¨å‘ç°ï¼Œapplication-default.yml &gt; /config/application.propertiesã€‚defaultçš„ä¼˜å…ˆçº§æ˜¯å¤§äºconfigç›®å½•çš„ classpath:/config/application-default.yml vs classpath:/application-default.yml- resources - application-default.yml # 8081 - /config/application-default.yml # 8082 å¯åŠ¨å‘ç°ï¼ŒåŒæ ·æ˜¯defaultçš„æ¡ä»¶ä¸‹ï¼Œconfig/application-default.yml &gt; application-default.yml æ€»ç»“config/application-default.properties &gt; config/application-default.yml &gt; application-default.properties &gt; application-default.yml &gt; config/application.properties &gt; config/application.yml &gt; application.properties &gt; application.yml","categories":[{"name":"springboot","slug":"springboot","permalink":"http://www.smxknife.com/categories/springboot/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"http://www.smxknife.com/tags/springboot/"}]},{"title":"SpringBootä¹‹SpringApplication","slug":"SpringBootä¹‹SpringApplication","date":"2018-03-21T20:21:47.000Z","updated":"2018-03-21T20:22:08.573Z","comments":true,"path":"2018/03/22/SpringBootä¹‹SpringApplication/","link":"","permalink":"http://www.smxknife.com/2018/03/22/SpringBootä¹‹SpringApplication/","excerpt":"","text":"ç®€ä»‹å¯ä»¥ç”¨äºä»javaä¸»æ–¹æ³•ä¸­å¼•å¯¼å’Œå¯åŠ¨Springåº”ç”¨ç¨‹åºçš„ç±»ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥å¯åŠ¨åº”ç”¨ï¼š åˆ›å»ºä¸€ä¸ªApplicationContextå®ä¾‹ æ³¨å†ŒCommandLinePropertySourceç”¨æ¥æš´éœ²å‘½ä»¤è¡Œå‚æ•°ä½œä¸ºspringçš„å±æ€§ refresh applicationContextï¼ŒåŠ è½½æ‰€æœ‰çš„singleton bean è§¦å‘ä»»ä½•CommandLineRunner bean è‡ªå®šä¹‰SpringApplicationé»˜è®¤çš„å¯åŠ¨æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼Œä¸åšæ·±å…¥ä»‹ç» 1SpringApplication.run(AppBoot1.class, args); å½“ç„¶ä¹Ÿå¯ä»¥åšä¸€äº›å®šåˆ¶ï¼Œå¦‚åœ¨Banneré‡Œé¢ä»‹ç»çš„è‡ªå®šä¹‰bannerï¼Œè¿˜æœ‰æ·»åŠ Listenerç­‰è¯¸å¤šè®¾ç½®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š 123SpringApplication app = new SpringApplication(MySpringConfiguration.class); app.setBannerMode(Banner.Mode.OFF); app.run(args); ä½¿ç”¨Fluent Builder APIè¿›è¡Œæ„å»ºå…ˆä¸Šä»£ç ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031new SpringApplicationBuilder() .sources(ParentConfig.class) .child(Child1Config.class) .sibling(Child2Config.class) .banner(new AppBanner()) .logStartupInfo(false) .run(args); // ParentConfig.class//@Configuration@SpringBootApplication@PropertySource(\"classpath:/parent.properties\")public class ParentConfig &#123;&#125;// Child1Config.class@SpringBootApplication@PropertySource(\"classpath:/child1.properties\")public class Child1Config &#123;&#125;// Child2Config.class@SpringBootApplication@PropertySource(\"classpath:/child2.properties\")public class Child2Config &#123;&#125; ä½¿ç”¨SpringApplicationBuilderåœ¨æ„å»ºåˆ†å±‚çš„ApplicationContextåº”ç”¨çš„æ—¶å€™éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯å®˜ç½‘ç»™çš„ä»£ç ç¤ºä¾‹å¾ˆç®€å•ï¼Œå¯¹äºä¸€äº›åˆæ¬¡ä»‹å…¥çš„äººå¯èƒ½ç†è§£ä¸Šä¸æ˜¯é‚£ä¹ˆé€å½»ã€‚å°±ä¸Šé¢çš„ä»£ç åšä¸€äº›ç®€å•çš„ä»‹ç» .sources(ParentConfig.class)è¯¥æ–¹æ³•æ˜¯ç”¨æ¥é…ç½®çˆ¶é…ç½®ï¼Œæˆ–ä¸»é…ç½®çš„ã€‚ä½†æ˜¯æœ‰å‘!!!!è¯·çœ‹ä¸Šé¢çš„ParentConfigçš„ä»£ç ï¼Œæ³¨è§£æˆ‘ä½¿ç”¨çš„æ˜¯@SpringBootApplicationï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯springbootçš„1.xçš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ ä¼šå¾ˆé¡ºåˆ©ï¼Œå¦‚æœä½ æ­£åœ¨ç ”ç©¶springboot 2.xçš„ç‰ˆæœ¬ï¼Œä½ ä¼šå‘ç°æ— è®ºå¦‚ä½•ä¹Ÿæ— æ³•å¯åŠ¨æˆåŠŸï¼ˆæˆ‘è¢«å‘çš„å¥½æƒ¨ï¼‰â€¦ã€‚èªæ˜çš„äººä¹Ÿè®¸çœ‹åˆ°æˆ‘çš„æ³¨é‡Šï¼Œæ²¡é”™æ¢æˆ@Configurationä¹‹åå°±å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ä½†æ˜¯å¾ˆæŠ±æ­‰ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆæš‚æ—¶è¿˜æ²¡æ‰¾åˆ°åŸå› ï¼Œåœ¨githubä¸Šè¯·æ•™æš‚æ—¶ä¹Ÿæ²¡å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œåé¢ç»§ç»­ç ”ç©¶ï¼Œå¦‚æœæœ‰äººå‘ç°äº†å…¶ä¸­çš„åŸå› ï¼Œè¯·é€šçŸ¥æˆ‘ä¸€ä¸‹ .child(Child1Config.class)é‚£ä¹ˆé€šè¿‡åå­—å°±å¯ä»¥çœ‹åˆ°æ˜¯å­ç¯å¢ƒäº†ï¼ŒChild1Configå°±æ˜¯child1çš„é…ç½®æ–‡ä»¶ã€‚ä¹Ÿè®¸ä½ çš„åº”ç”¨é‡Œæœ‰å¤šä¸ªchildï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šæƒ³ç”¨å¤šä¸ªchild().child()ï¼Œé‚£ä¹ˆè¿™æ ·ä½ çš„ç¬¬äºŒä¸ªchildä¸æ˜¯parentçš„childï¼Œè€Œæ˜¯ç¬¬ä¸€ä¸ªchildçš„childï¼Œparentçš„å­™å­ã€‚æƒ³è¦å®ç°å¤šä¸ªåŒçº§çš„å­©å­ï¼Œå¯ä»¥ä½¿ç”¨ä»£ç ä¸­çš„.sibling(Child2Config.class)æ–¹æ³•ã€‚è¿™é‡ŒåŒæ ·å­˜åœ¨ä¸€ä¸ªspringbootçš„ç‰ˆæœ¬æ”¹åŠ¨é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚æœä½ è¦åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ä¸ºchild1é…ç½®ä¸€ä¸ªcontext pathï¼Œé‚£ä¹ˆåœ¨ç‰ˆæœ¬1é‡Œé¢çš„æ–¹æ³•æ˜¯server.contextPath=child1ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨ç‰ˆæœ¬2çš„æœ‹å‹å°±éœ€è¦åšä¸€ç‚¹å°æ”¹åŠ¨äº†ï¼Œæ”¹ä¸ºserver.servlet.contextPath=child1 å¯ä»¥å‚ç…§githubä¸Šçš„ä»£ç è¿›è¡Œè¯¦ç»†çš„ç†è§£github äº‹ä»¶å’Œç›‘å¬å™¨springé‡Œé¢çš„ç›‘å¬å™¨æœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼š @EventListeneræ³¨è§£æ–¹å¼ å®ç°ApplicationListeneræ¥å£ å®ç°SmartApplicationListeneræ¥å£ ä¸Šé¢ä¸‰ç§æ–¹å¼ä»£ç åˆ†åˆ«ä¸º 12345678910@Componentpublic class AnnotationRegisterListener &#123; @EventListener public void register(UserRegisterEvent event) &#123; User user = event.getUser(); System.out.println(\"AnnotationRegisterListener \" + user.getName() + \", \" + user.getPassword()); &#125;&#125; 1234567891011@Componentpublic class RegisterListener implements ApplicationListener&lt;UserRegisterEvent&gt;&#123; @Override public void onApplicationEvent(UserRegisterEvent event) &#123; User user = event.getUser(); System.out.println(\"RegisterListener \" + user.getName() + \", \" + user.getPassword()); &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839@Componentpublic class UserRegisterListener implements SmartApplicationListener &#123; /** * è¯¥æ–¹æ³•è¿”å›true&amp;supportsSourceTypeåŒæ ·è¿”å›trueæ—¶ï¼Œæ‰ä¼šè°ƒç”¨è¯¥ç›‘å¬å†…çš„onApplicationEventæ–¹æ³• * @param eventType * @return */ @Override public boolean supportsEventType(Class&lt;? extends ApplicationEvent&gt; eventType) &#123; return UserRegisterEvent.class.isAssignableFrom(eventType); &#125; /** * è¯¥æ–¹æ³•è¿”å›true&amp;supportsEventTypeåŒæ ·è¿”å›trueæ—¶ï¼Œæ‰ä¼šè°ƒç”¨è¯¥ç›‘å¬å†…çš„onApplicationEventæ–¹æ³• * @param sourceType * @return */ @Override public boolean supportsSourceType(@Nullable Class&lt;?&gt; sourceType) &#123; return UserService.class.isAssignableFrom(sourceType); &#125; @Override public void onApplicationEvent(ApplicationEvent event) &#123; UserRegisterEvent userRegisterEvent = (UserRegisterEvent) event; User user = userRegisterEvent.getUser(); System.out.println(\"UserRegisterListener \" + user.getName() + \", \" + user.getPassword()); &#125; /** * åŒæ­¥æƒ…å†µä¸‹ç›‘å¬æ‰§è¡Œçš„é¡ºåº * @return */ @Override public int getOrder() &#123; return 3; &#125;&#125; å‰ä¸¤ç§å®ç°æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œç¨å¾®ä»‹ç»ä¸€ä¸‹ç¬¬ä¸‰ç§ï¼Œè¿™ç§å®ç°æ–¹å¼å¿…é¡»åœ¨supportsEventTypeå’ŒsupportsSourceTypeåŒæ—¶è¿”å›trueçš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œäº‹ä»¶ï¼Œå…·ä½“å¦‚ä½•è¿”å›trueå’Œfalseå°±çœ‹ä½ è‡ªå·±çš„ä¸šåŠ¡å®ç°ã€‚åœ¨è¿™é‡Œæˆ‘ä½¿ç”¨äº†jdkçš„isAssignableFromæ–¹æ³•æ¥åˆ¤æ–­çˆ¶å­å…³ç³»çš„ã€‚ä¸Šé¢ä¸¤ç§æ–¹å¼äº‹ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯æ— åºçš„ï¼Œç¬¬ä¸‰ç§æä¾›äº†ä¸€ç§æŒ‡å®šå±æ€§çš„æ–¹æ³•getOrder() å…·ä½“çš„isAssignableFromæ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Œè¯·çœ‹å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142public class Animal &#123;&#125;public class Bird extends Animal implements Fly &#123;&#125;public class Dove extends Bird &#123;&#125;public class Penguin extends Bird &#123;&#125;public interface Fly &#123;&#125;public class Demo03 &#123; public static void main(String[] args) &#123; assignOut(Animal.class, Animal.class); assignOut(Animal.class, Bird.class); assignOut(Bird.class, Animal.class); assignOut(Animal.class, Dove.class); assignOut(Penguin.class, Dove.class); assignOut(Fly.class, Bird.class); assignOut(Fly.class, Dove.class); &#125; static void assignOut(Class cls1, Class cls2) &#123; System.out.println(cls1.getSimpleName() + \" isAssignableFrom \" + cls2.getSimpleName() + \" : \" + cls1.isAssignableFrom(cls2)); &#125;&#125;// è¾“å‡ºç»“æœAnimal isAssignableFrom Animal : trueAnimal isAssignableFrom Bird : trueBird isAssignableFrom Animal : falseAnimal isAssignableFrom Dove : truePenguin isAssignableFrom Dove : falseFly isAssignableFrom Bird : trueFly isAssignableFrom Dove : true SpringBootå¯åŠ¨è¿‡ç¨‹ä¸­çš„äº‹ä»¶åŠç›‘å¬å™¨ ApplicationStartingEvent åº”ç”¨å¼€å§‹å¯åŠ¨æ—¶æ‰§è¡Œï¼Œåœ¨åˆå§‹åŒ–listeners and initializersä¹‹å‰æ‰§è¡Œ ApplicationEnvironmentPreparedEvent ç¯å¢ƒå‡†å¤‡å¥½å¼€å§‹æ‰§è¡Œï¼Œä¸Šä¸‹æ–‡åˆ›å»ºä¹‹å‰æ‰§è¡Œ ApplicationPreparedEvent åº”ç”¨å‡†å¤‡å¥½å¼€å§‹æ‰§è¡Œï¼Œå³æ‰€æœ‰beanéƒ½å·²ç»åŠ è½½å®Œæ¯•ä¹‹åï¼Œåœ¨refreshæ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ ApplicationStartedEvent åº”ç”¨å¯åŠ¨åå¼€å§‹æ‰§è¡Œï¼Œå³ä¸Šä¸‹æ–‡è¢«refreshedä¹‹åï¼Œä»»ä½•çš„applicationå’Œcommand-line runnersè°ƒç”¨å‰æ‰§è¡Œ ApplicationReadyEvent åº”ç”¨å¯åŠ¨å®Œæ¯•å¼€å§‹æ‰§è¡Œï¼Œä»»ä½•çš„applicationå’Œcommand-line runnersè°ƒç”¨åæ‰§è¡Œï¼Œä»æ­¤åå¯ä»¥æœåŠ¡requestäº† ApplicationFailedEvent å¯åŠ¨æ—¶é‡åˆ°å¼‚å¸¸æ‰§è¡Œ Listenerçš„å†™æ³•å¾ˆç®€å•ï¼Œåªä»¥ApplicationStartingEventä¸ºä¾‹ï¼Œå…¶ä»–ç±»ä¼¼ 123456789101112131415161718public class MyApplicationStartedListener implements ApplicationListener&lt;ApplicationStartedEvent&gt; &#123; @Override public void onApplicationEvent(ApplicationStartedEvent applicationStartedEvent) &#123; System.out.println(\"MyApplicationStartedListener...\"); &#125;&#125;åœ¨mainæ–¹æ³•æ³¨å…¥SpringApplicationBuilder builder = new SpringApplicationBuilder(); builder.listeners(new MyApplicationStartingListener()); builder.listeners(new MyApplicationEnvironmentPreparedListener()); builder.listeners(new MyApplicationPreparedListener()); builder.listeners(new MyApplicationStartedListener());// builder.listeners(new MyApplicationReadyListener()); builder.sources(AppBoot.class); builder.run(args);æˆ–è€…å¯ä»¥åœ¨META-INF/spring.factoriesä¸­é…ç½®org.springframework.context.ApplicationListener=com.smxknife.springboot.v2.ex03.listener.MyApplicationReadyListener çœ‹ä¸€ä¸‹è¾“å‡ºç»“æœ 1234567891011121314151617181920212223242526272829303132333435363738394041422018-03-03 01:24:06.387 INFO 5399 --- [ restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged2018-03-03 01:28:58.909 INFO 5399 --- [ Thread-28] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@58c49e73: startup date [Sat Mar 03 01:24:05 CST 2018]; root of context hierarchy2018-03-03 01:28:58.913 INFO 5399 --- [ Thread-28] o.s.j.e.a.AnnotationMBeanExporter : Unregistering JMX-exposed beans on shutdownMyApplicationStartingListener...MyApplicationEnvironmentPreparedListener... . ____ _ __ _ _ /\\\\ / ___'_ __ _ _(_)_ __ __ _ \\ \\ \\ \\( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\ \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) ' |____| .__|_| |_|_| |_\\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2.0.0.RC2)2018-03-03 01:28:59.534 INFO 5399 --- [ restartedMain] com.smxknife.springboot.v2.ex03.AppBoot : Starting AppBoot on ShaoYundeMacBook-Pro.local with PID 5399 (/Users/ShaoYun/local/workstation/programs/smxknife/spring-boot/spring-boot-v2/spring-boot-v2-web/target/classes started by ShaoYun in /Users/ShaoYun/local/workstation/programs/smxknife/spring-boot)2018-03-03 01:28:59.536 INFO 5399 --- [ restartedMain] com.smxknife.springboot.v2.ex03.AppBoot : No active profile set, falling back to default profiles: defaultMyApplicationPreparedListener...2018-03-03 01:28:59.539 INFO 5399 --- [ restartedMain] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@45b78eb1: startup date [Sat Mar 03 01:28:59 CST 2018]; root of context hierarchy2018-03-03 01:29:00.304 INFO 5399 --- [ restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 10101 (http)2018-03-03 01:29:00.305 INFO 5399 --- [ restartedMain] o.apache.catalina.core.StandardService : Starting service [Tomcat]2018-03-03 01:29:00.305 INFO 5399 --- [ restartedMain] org.apache.catalina.core.StandardEngine : Starting Servlet Engine: Apache Tomcat/8.5.282018-03-03 01:29:00.316 INFO 5399 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/] : Initializing Spring embedded WebApplicationContext2018-03-03 01:29:00.317 INFO 5399 --- [ost-startStop-1] o.s.web.context.ContextLoader : Root WebApplicationContext: initialization completed in 778 ms2018-03-03 01:29:00.338 INFO 5399 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean : Servlet dispatcherServlet mapped to [/]2018-03-03 01:29:00.338 INFO 5399 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean : Mapping filter: 'characterEncodingFilter' to: [/*]2018-03-03 01:29:00.338 INFO 5399 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]2018-03-03 01:29:00.338 INFO 5399 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean : Mapping filter: 'httpPutFormContentFilter' to: [/*]2018-03-03 01:29:00.338 INFO 5399 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean : Mapping filter: 'requestContextFilter' to: [/*]2018-03-03 01:29:00.492 INFO 5399 --- [ restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@45b78eb1: startup date [Sat Mar 03 01:28:59 CST 2018]; root of context hierarchy2018-03-03 01:29:00.529 INFO 5399 --- [ restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"&#123;[/register]&#125;\" onto public java.lang.String com.smxknife.springboot.v2.ex03.web.controller.UserController.register(com.smxknife.springboot.v2.ex03.domain.User)2018-03-03 01:29:00.533 INFO 5399 --- [ restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"&#123;[/error]&#125;\" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)2018-03-03 01:29:00.534 INFO 5399 --- [ restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"&#123;[/error],produces=[text/html]&#125;\" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)2018-03-03 01:29:00.555 INFO 5399 --- [ restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]2018-03-03 01:29:00.555 INFO 5399 --- [ restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]2018-03-03 01:29:00.591 INFO 5399 --- [ restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]2018-03-03 01:29:00.648 INFO 5399 --- [ restartedMain] o.s.b.d.a.OptionalLiveReloadServer : LiveReload server is running on port 357292018-03-03 01:29:00.720 INFO 5399 --- [ restartedMain] o.s.j.e.a.AnnotationMBeanExporter : Registering beans for JMX exposure on startup2018-03-03 01:29:00.738 INFO 5399 --- [ restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 10101 (http) with context path ''2018-03-03 01:29:00.739 INFO 5399 --- [ restartedMain] com.smxknife.springboot.v2.ex03.AppBoot : Started AppBoot in 1.585 seconds (JVM running for 3711.163)MyApplicationStartedListener...MyApplicationReadyListener...2018-03-03 01:29:00.741 INFO 5399 --- [ restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged Listenerçš„ç›¸å…³ä»£ç å¯ä»¥å‚ç…§ github","categories":[{"name":"springboot","slug":"springboot","permalink":"http://www.smxknife.com/categories/springboot/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"http://www.smxknife.com/tags/springboot/"}]},{"title":"SpringBootä¹‹Banner","slug":"SpringBootä¹‹Banner","date":"2018-03-21T20:20:49.000Z","updated":"2018-03-21T20:21:20.239Z","comments":true,"path":"2018/03/22/SpringBootä¹‹Banner/","link":"","permalink":"http://www.smxknife.com/2018/03/22/SpringBootä¹‹Banner/","excerpt":"","text":"1234567 . ____ _ __ _ _ /\\\\ / ___'_ __ _ _(_)_ __ __ _ \\ \\ \\ \\( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\ \\\\/ ___)| |_)| | | | | || (_| | ) ) ) ) ' |____| .__|_| |_|_| |_\\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2.0.0.BUILD-SNAPSHOT) ç†Ÿæ‚‰çš„bannerï¼Œè¿™æ˜¯springbootçš„é»˜è®¤bannerï¼Œå¯¹äºé¡¹ç›®æ¥è¯´æœ‰å¯ä»¥ï¼Œæ²¡æœ‰ä¹Ÿå¯ä»¥ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šåˆ¶ï¼Œæƒå½“æ— èŠç©ç©~ è‡ªå®šä¹‰bannerå®˜æ–¹æä¾›äº†ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š é€šè¿‡banner.txtæ¥è‡ªå®šä¹‰ é€šè¿‡æ·»åŠ å›¾ç‰‡banner.gifï¼Œbanner.jpg, banner.png ç¼–ç¨‹çš„æ–¹å¼SpringApplication.setBanner(â€¦â€‹) banner.txt å°†è¯¥æ–‡ä»¶æ”¾åœ¨ç±»è·¯å¾„ä¸‹å³å¯ï¼ˆå¯ä»¥ç›´æ¥æ”¾åœ¨/resource/ä¸‹é¢ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶çš„spring.banner.locationå±æ€§æ¥è¿›è¡Œå®šä½ å¦‚æœæ–‡ä»¶ç¼–ç ä¸æ˜¯utf8ï¼Œå¯ä»¥é€šè¿‡spring.banner.charsetè¿›è¡Œè‡ªå®šä¹‰è®¾ç½® springbootä¸ºæˆ‘ä»¬æä¾›äº†bannerå‚æ•°çš„å ä½ç¬¦ ${application.version} åº”ç”¨ç‰ˆæœ¬å· ${application.formatted-version} æ ¼å¼åŒ–åº”ç”¨ç‰ˆæœ¬å·ï¼Œå¦‚ï¼ˆv1.0ï¼‰ ${spring-boot.version} springbootçš„ç‰ˆæœ¬å· ${spring-boot.formatted-version} ${Ansi.NAME} (or ${AnsiColor.NAME}, ${AnsiBackground.NAME}, ${AnsiStyle.NAME}) ${application.title} ä¹Ÿè®¸ä½ æŒ‰ç…§ä¸Šé¢çš„æ ¼å¼å†™äº†ï¼Œä½†æ˜¯æœ€åçš„è¾“å‡ºç»“æœï¼Œå¾ˆæœ‰å¯èƒ½åªè¾“å‡ºäº†springbootçš„ç‰ˆæœ¬å·ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå…¶ä»–çš„éƒ½éœ€è¦æœ‰æ¡ä»¶è¾“å‡ºï¼Œå…·ä½“çš„å‚è€ƒå®˜ç½‘ å›¾ç‰‡ å°±æ˜¯è¦åšä¸€å¼ å›¾ç‰‡åŒæ ·æ”¾åˆ°ç±»è·¯å¾„ä¸‹å³å¯ï¼ŒåŒæ ·å¯ä»¥é€šè¿‡spring.banner.image.locationæ¥è¿›è¡Œå®šä½ å¿…é¡»æ˜¯banner.gifï¼Œbanner.jpg, banner.pngè¿™ä¸‰ä¸ªåç§° ç¼–ç¨‹çš„æ–¹å¼å¯ä»¥æ–°å»ºä¸€ä¸ªç±»å®ç°Banneræ¥å£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒ¿åç±» 1234567891011121314public class AppBanner implements Banner &#123; public void printBanner(Environment environment, Class&lt;?&gt; sourceClass, PrintStream out) &#123; out.append(\"================================\\r\\n\") .append(\"------ \") .append(environment.getProperty(\"app.name\") + \"\\r\\n\") .append(sourceClass.getName() + \"\\r\\n\") .append(\"================================\").println(); &#125;&#125;// mainå‡½æ•°SpringApplication app = new SpringApplication(ApplicationBoot.class); app.setBanner(new AppBanner()); app.run(args); 1234567SpringApplication app = new SpringApplication(ApplicationBoot.class); app.setBanner(new Banner() &#123; public void printBanner(Environment environment, Class&lt;?&gt; sourceClass, PrintStream out) &#123; // TODO &#125; &#125;); app.run(args); åŒ¿åç±»ä¸å®ç°ç±»åŒæ ·éƒ½æ˜¯å®ç°printBanneræ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•° environment ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥è·å–propertiesæˆ–è€…ymlä¸­çš„key-valueå€¼ sourceClass å°±æ˜¯SpringApplicationé…ç½®çš„classï¼Œè¿™é‡Œå°±æ˜¯ApplicationBoot.class out å°±æ˜¯è´Ÿè´£çš„è¾“å‡ºæµ PSï¼šè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œåœ¨mainå‡½æ•°ä¸­çš„å†™æ³•ï¼Œä¸Šé¢çš„mainå†™æ³•æ˜¯å¯è¡Œçš„ï¼Œ ä½†æ˜¯å¦‚æœæ”¹ä¸ºä¸‹é¢çš„å†™æ³•å°†ä¸ä¼šè¾“å‡ºï¼Œæˆ–è€…å°±ä¼šå˜æˆé»˜è®¤è¾“å‡º 123SpringApplication app = new SpringApplication(); app.setBanner(new AppBanner()); app.run(ApplicationBoot.class, args); ä¼˜å…ˆçº§è¿™ä¹ˆå¤šçš„å®šä¹‰æ–¹å¼ï¼Œå¦‚æœæˆ‘å…¨éƒ¨å®šä¹‰äº†ï¼Œè¯¥æ˜¾ç¤ºå“ªä¸ªå‘¢ï¼Ÿ é¦–å…ˆï¼Œå›¾ç‰‡çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¦‚æœä¸banner.txtåŒæ—¶å­˜åœ¨ä¼šä¼˜å…ˆæ˜¾ç¤ºå›¾ç‰‡ï¼Œç„¶åå†æ˜¾ç¤ºbanner.txtã€‚æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªæ˜¯å¯ä»¥åŒæ—¶æ˜¾ç¤ºçš„ è€Œå›¾ç‰‡å­˜åœ¨ä¸‰ç§æ ¼å¼ï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ä¸º .gif &gt; .jpg &gt; .pngï¼Œè¿™ä¸‰ç§å¦‚æœåŒæ—¶å­˜åœ¨ä¼šå®‰è£…ä¼˜å…ˆçº§çš„é¡ºåºæ˜¾ç¤ºä¼˜å…ˆçº§æœ€é«˜çš„ä¸€å¼ å›¾ç‰‡ï¼Œå…¶ä½™çš„å¿½ç•¥ä¸æ˜¾ç¤º ç¼–ç¨‹çš„æ–¹å¼æ˜¯ä¼˜å…ˆçº§æœ€å¼±çš„ï¼Œåªæœ‰åœ¨ä¸Šé¢ä¸¤ç§åŒæ—¶ä¸å­˜åœ¨çš„æƒ…å†µä¸‹æ‰ä¼šç”Ÿæ•ˆ å…¶ä»–è®¾ç½® å…³é—­bannerï¼šæœ‰æ—¶å¦‚æœè§‰å¾—éº»çƒ¦ï¼Œåˆä¸å–œæ¬¢springçš„logoï¼Œé‚£ä¹ˆç›´æ¥å…³æ‰å°±å¯ä»¥å•¦ SpringApplication.setBannerMode(Banner.Mode.OFF); spring.main.banner-model=off è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯ï¼Œå¦‚æœé‡‡ç”¨çš„æ˜¯.ymlçš„é…ç½®æ–‡ä»¶ï¼Œç›´æ¥è¿™æ ·å†™å¯åŠ¨ä¼šå¤±è´¥ï¼Œè¿™å¯èƒ½æ˜¯ymlçš„é—®é¢˜ï¼Œéœ€è¦å°†offæ”¹ä¸ºâ€™offâ€™å³å¯ Banner.Modeçš„æ¨¡å¼ CONSOLE é»˜è®¤æ¨¡å¼ï¼Œè¾“å‡ºåˆ°æ§åˆ¶å° LOG åœ¨logä¸­æ˜¾ç¤º OFF å…³é—­banner å¦‚æœåŒæ—¶å­˜åœ¨ä»£ç è®¾ç½®å¼€å¯ï¼Œé…ç½®è®¾ç½®å…³é—­ä¸¤ç§æ–¹å¼å“ªç§ä¼šç”Ÿæ•ˆå‘¢ï¼Ÿé…ç½®çš„ä¼˜å…ˆçº§ &gt; ç¼–ç¨‹ï¼Œæ‰€ä»¥â€¦","categories":[{"name":"springboot","slug":"springboot","permalink":"http://www.smxknife.com/categories/springboot/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"http://www.smxknife.com/tags/springboot/"}]},{"title":"Springä¹‹scopeè§£æƒ‘","slug":"Springä¹‹scopeè§£æƒ‘","date":"2018-03-21T20:19:47.000Z","updated":"2018-03-21T20:20:13.000Z","comments":true,"path":"2018/03/22/Springä¹‹scopeè§£æƒ‘/","link":"","permalink":"http://www.smxknife.com/2018/03/22/Springä¹‹scopeè§£æƒ‘/","excerpt":"","text":"Springçš„ä½œç”¨åŸŸscopeåœ¨2.0ä¹‹å‰åªæœ‰ä¸¤ç§singletonå’Œprototypeï¼ˆç½‘ä¸Šè¯´çš„ï¼Œæ²¡å»éªŒè¯ï¼Œé‚£æ—¶å€™è¿˜æ²¡ä»”ç»†ç ”ç©¶è¿‡â€¦ï¼‰ï¼Œåé¢å¢åŠ äº†sessionã€requestã€global sessionä¸‰ç§ä¸“é—¨ç”¨äºwebåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„Bean Singletonè¿™æ˜¯springçš„beançš„é»˜è®¤çš„ä½œç”¨åŸŸ-å•ä¾‹ã€‚ä½†æ˜¯æ­¤å•ä¾‹åˆä¸è®¾è®¡æ¨¡å¼ä¸­çš„å•ä¾‹æ¨¡å¼ä¸ä¸€æ ·ï¼Œè®¾è®¡æ¨¡å¼çš„å•ä¾‹åœ¨è®¾è®¡æ¨¡å¼çš„æ–‡ç« ä¸­å†ä»‹ç»ã€‚ singletonä¸è¦ç®€å•çš„ç†è§£ä¸ºå…¨å±€åªæœ‰ä¸€ä¸ªï¼ŒçœŸæ­£çš„æ„ä¹‰æ˜¯åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ˆApplicationContextï¼‰ä¸­åªæœ‰ä¸€ä¸ªã€‚å¦‚æœåœ¨ä¸€ä¸ªé¡¹ç›®ä¸­æœ‰å¤šä¸ªApplicationContextï¼Œé‚£ä¹ˆè·å–çš„Beanå¯¹è±¡å°±ä¸åªä¸€ä¸ªäº† åœ¨åŒä¸€ä¸ªå®¹å™¨æˆ–ä¸Šä¸‹æ–‡ä¸­ï¼Œæ‰€æœ‰å¯¹å•ä¾‹beançš„è¯·æ±‚ï¼Œåªè¦idä¸è¯¥beanå®šä¹‰ç›¸åŒ¹é…ï¼Œéƒ½ä¼šè¿”å›åŒä¸€ä¸ªå®ä¾‹ã€‚ç®€å•è¯´å°±æ˜¯beanå®šä¹‰ä¸ºsingletonæ—¶ï¼Œiocå®¹å™¨åªä¼šåˆ›å»ºè¯¥beançš„å”¯ä¸€å®ä¾‹ï¼Œç„¶åå­˜å‚¨åœ¨å•ä¾‹ç¼“å­˜ï¼ˆsingleton cacheï¼‰ä¸­ã€‚ singletonçš„beanæ˜¯æ— çŠ¶æ€çš„ï¼Œåªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥æ— è®ºå“ªä¸ªçº¿ç¨‹è·å–çš„éƒ½æ˜¯åŒä¸€ä¸ªåŒæ ·çš„å®ä¾‹ï¼Œå…·æœ‰çº¿ç¨‹æ— å…³æ€§ã€‚Springä½¿ç”¨ThreadLocalè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè¿™å°±è¦æ±‚åœ¨ä½¿ç”¨singletonçš„beanæ—¶ä¸èƒ½å­˜åœ¨å±æ€§çš„æ”¹å˜ï¼Œå¦‚æœå­˜åœ¨å±æ€§æ”¹å˜ï¼Œå°±éœ€è¦æ…é‡ä½¿ç”¨ï¼Œé‡‡ç”¨åŒæ­¥æ¥å¤„ç†å¤šçº¿ç¨‹é—®é¢˜ï¼Œæˆ–è€…è€ƒè™‘ä½¿ç”¨prototypeä½œç”¨åŸŸã€‚ åŸºäºä¸Šé¢ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„Controllerã€Serviceã€Repositoryã€Configurationè¿™äº›beanåŸºæœ¬ä¸Šéƒ½æ˜¯é¡¹ç›®å¯åŠ¨å°±å·²ç»åˆå§‹åŒ–å®Œæ¯•ï¼Œæ¯ä¸ªbeançš„å±æ€§éƒ½å·²ç»ç¡®å®šï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¸ä¼šæ›´æ”¹ï¼Œè¿™æ ·å°±å¾ˆé€‚åˆå•ä¾‹æ¨¡å¼ã€‚è¿™é‡Œå†è¯´ä¸€ä¸‹å®ä½“ç±»ï¼ˆç”¨@Entityæ³¨è§£ä¿®é¥°çš„ï¼‰è¿™ä¸ªå¯ä¸æ˜¯ä¸€ä¸ªbeanï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œæ¯æ¬¡ä½¿ç”¨å®ä½“çš„æ—¶å€™æ˜¯ä¸æ˜¯éƒ½æ˜¯DomainA a = new DomainA();ï¼Œåº”è¯¥æ²¡æœ‰äººè¿™ä¹ˆç”¨private DomainA domianA;```1234567ä½¿ç”¨scopeçš„æ–¹æ³•å¦‚ä¸‹ï¼š```java@Scope(&quot;singleton&quot;)@Componentpublic class MainService &#123;...&#125; Prototypeç›¸å¯¹åº”singletonï¼Œprototypeå°±å±äºå¤šä¾‹æ¨¡å¼ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œç›¸å½“äºnewæ“ä½œã€‚ å¯¹äºprototypeç±»å‹çš„beanï¼Œspringåªè´Ÿè´£åˆ›å»ºåˆå§‹åŒ–ï¼Œä¸ä¼šå¯¹æ•´ä¸ªç”Ÿå‘½å‘¨æœŸè´Ÿè´£ï¼Œéšåçš„æ‰€æœ‰æ“ä½œéƒ½äº¤ç»™å®¢æˆ·ç«¯æ¥å¤„ç† ç°åœ¨é—®ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å£°æ˜ä¸€ä¸ªprototypeçš„beanå¹¶ä½¿ç”¨å‘¢ï¼Ÿï¼ˆå…ˆä¸è¦æ€¥ç€å¾€ä¸‹çœ‹ï¼Œæƒ³ä¸€ä¸‹ï¼Œå°±ä»¥åœ¨ScopeTestControlleré‡Œé¢æ³¨å…¥prototypeçš„PrototypeServiceæ¥è¯´æ˜ï¼‰ ~ ~ ~ ~ æ€è€ƒä¸­... ~ ~ ~ ~ å¯èƒ½å¾ˆå¤šäººï¼ˆåŒ…æ‹¬æˆ‘ï¼‰å¼€å§‹ä¼šä»¥ä¸ºåƒä»¥ä¸‹è¿™ç§å†™æ³•å°±å¯ä»¥ 123456789101112131415161718192021public interface PrototypeService &#123;&#125;@Service@Scope(\"prototype\")public class PrototypeServiceImpl implements PrototypeService &#123;&#125;@RestControllerpublic class ScopeTestController &#123; @Autowired PrototypeService prototypeService; @GetMapping(\"/\") public void testPrototype() &#123; System.out.println(prototypeService); &#125;&#125; å¯åŠ¨é¡¹ç›®ï¼Œä¸¤æ¬¡æ¬¡è¯·æ±‚ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡º com.ukirin.idle.web.service.impl.PrototypeServiceImpl@74738f89 com.ukirin.idle.web.service.impl.PrototypeServiceImpl@74738f89 ï¼Ÿä¸€æ ·ï¼Ÿä»€ä¹ˆæƒ…å†µï¼Ÿå…¶å®ä»”ç»†æƒ³ä¸€ä¸‹ä¹Ÿå°±æ˜ç™½äº†é”™åœ¨å“ªï¼ŒControlleræ˜¯ä¸€ä¸ªå•ä¾‹ï¼Œåœ¨å¯åŠ¨æ—¶å°±å·²ç»æŠŠServiceæ³¨å…¥äº†ï¼Œæ‰€ä»¥ä¸å¯èƒ½æ”¹å˜ï¼Œå½“ç„¶ç°åœ¨ä½ å¯ä»¥è¿™ä¹ˆæ”¹ï¼Œå°†ControlleråŒæ ·æ”¹ä¸ºprototypeçš„ã€‚é‚£ä¹ˆæ­å–œä½ å›ç­”æ­£ç¡®ï¼Œä½†æ˜¯ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯è¦çœ‹åœ¨å•ä¾‹ä¸­å¦‚ä½•ä½¿ç”¨ã€‚ æ–¹æ³•1ï¼šä»ApplicationContexté‡Œé¢è·å–å°†Controlleré‡Œé¢çš„ä»£ç åšä»¥ä¸‹æ”¹åŠ¨ 12345678910111213141516@RestControllerpublic class ScopeTestController &#123;// @Autowired// PrototypeService prototypeService; @Autowired WebApplicationContext applicationContext; @GetMapping(\"/\") public void testPrototype() &#123;// System.out.println(prototypeService); System.out.println(applicationContext.getBean(PrototypeService.class)); &#125;&#125; è¿™æ ·æ¯æ¬¡éƒ½ä»ä¸Šä¸‹æ–‡ä¸­è¯·æ±‚ä¸€ä¸ªå®ä¾‹ï¼Œå®¹å™¨å¯¹æ¯ä¸ªè¯·æ±‚éƒ½å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„Serviceï¼Œæ²¡æœ‰é—®é¢˜ æ–¹æ³•2ï¼šæ–¹æ³•1çš„å˜ç§ï¼Œé‡‡ç”¨å·¥å‚æ¨¡å¼æ¥ç”ŸæˆServiceä»£ç å°±ä¸å†™äº†â€¦ æ–¹æ³•3ï¼šä½¿ç”¨ä»£ç†å¾ˆç®€å•ï¼Œåœ¨@Scopeé‡Œé¢åŠ ä¸Šä»£ç†æ¨¡å¼å³å¯ 12345678910111213141516171819202122@Service@Scope(value = \"prototype\", proxyMode = ScopedProxyMode.INTERFACES)public class PrototypeServiceImpl implements PrototypeService &#123;&#125;@RestControllerpublic class ScopeTestController &#123; @Autowired PrototypeService prototypeService;// @Autowired// WebApplicationContext applicationContext; @GetMapping(\"/\") public void testPrototype() &#123; System.out.println(prototypeService);// System.out.println(applicationContext.getBean(PrototypeService.class)); &#125;&#125; è¿™æ ·ï¼Œå°±å¯ä»¥æ¯æ¬¡è·å–ä¸åŒçš„Serviceäº†ï¼Œè¿™ä¸ªçš„åŸç†å°±æ˜¯ï¼Œåœ¨åˆå§‹åŒ–Controllerçš„æ—¶å€™å¹¶ä¸æ˜¯è®²ä¸€ä¸ªServiceçš„å®ä½“æ³¨å…¥ï¼Œè€Œæ˜¯æ³¨å…¥ä¸€ä¸ªä»£ç†ï¼Œå½“çœŸæ­£è°ƒç”¨Serviceçš„æ—¶å€™ï¼Œä»£ç†ä¼šå¯¹å…¶è¿›è¡Œä¾èµ–è§£æï¼Œå¹¶è°ƒç”¨çœŸæ­£çš„å®ä½“bean é¢å¤–éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœæ³¨å…¥çš„ä¸æ˜¯æ¥å£çš„å®ç°ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆéœ€è¦å°†proxyMode = ScopedProxyMode.INTERFACESæ”¹ä¸ºproxyMode = ScopedProxyMode.TARGET_CLASS requestè¯¥ä½œç”¨åŸŸå°† bean çš„å®šä¹‰é™åˆ¶ä¸º HTTP è¯·æ±‚ã€‚åªåœ¨ web-aware Spring ApplicationContext çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ ä¸Šè¿°çš„å®éªŒç»“æœæ˜¯æ¯æ¬¡è¯·æ±‚éƒ½ä¼šè¾“å‡ºä¸ä¸€æ ·çš„ç»“æœï¼Œåœ¨è¿™é‡Œå¯èƒ½ä¼šä¸prototypeäº§ç”Ÿå›°æƒ‘ï¼Œåšä»¥ä¸‹çš„å®éªŒå¯ä»¥è§£å†³ä½ çš„å›°æƒ‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public interface PrototypeService &#123;&#125;@Service@Scope(value = \"request\", proxyMode = ScopedProxyMode.INTERFACES)public class PrototypeServiceImpl implements PrototypeService &#123;&#125;public interface MiddleService &#123; void test();&#125;@Servicepublic class MiddleServiceImpl implements MiddleService &#123; @Autowired PrototypeService prototypeService; @Override public void test() &#123; System.out.println(\"middle : \" + prototypeService); &#125;&#125;@RestControllerpublic class ScopeTestController &#123; @Autowired MiddleService middleService; @Autowired PrototypeService prototypeService;// @Autowired// WebApplicationContext applicationContext; @GetMapping(\"/\") public void testPrototype() &#123; System.out.println(\"controller : \" + prototypeService);// System.out.println(applicationContext.getBean(PrototypeService.class)); middleService.test(); &#125;&#125; è¾“å‡ºç»“æœä¸ºï¼š controller : com.ukirin.idle.web.service.impl.PrototypeServiceImpl@6b90371c middle : com.ukirin.idle.web.service.impl.PrototypeServiceImpl@6b90371c ç„¶åå°†ä½œç”¨åŸŸæ”¹ä¸ºprototypeå†æµ‹è¯•ä¸€ä¸‹è¾“å‡ºç»“æœä¸ºï¼š controller : com.ukirin.idle.web.service.impl.PrototypeServiceImpl@49b2c498 middle : com.ukirin.idle.web.service.impl.PrototypeServiceImpl@ccb8c47 ç»“æœæ˜¾è€Œæ˜“è§ sessionè¯¥ä½œç”¨åŸŸå°† bean çš„å®šä¹‰é™åˆ¶ä¸º HTTP ä¼šè¯ã€‚ åªåœ¨web-aware Spring ApplicationContextçš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚ ä¸Šè¿°çš„å®éªŒç»“æœæ˜¯ä¸€ä¸ªä¼šè¯å†…è¾“å‡ºç»“æœæ˜¯ä¸€æ ·çš„ global-sessionè¯¥ä½œç”¨åŸŸå°† bean çš„å®šä¹‰é™åˆ¶ä¸ºå…¨å±€ HTTP ä¼šè¯ã€‚åªåœ¨ web-aware Spring ApplicationContext çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚","categories":[{"name":"spring","slug":"spring","permalink":"http://www.smxknife.com/categories/spring/"}],"tags":[{"name":"spring","slug":"spring","permalink":"http://www.smxknife.com/tags/spring/"}]},{"title":"Long==Longæœ‰è¶£çš„ç°è±¡","slug":"Long-Longæœ‰è¶£çš„ç°è±¡","date":"2018-03-21T20:18:25.000Z","updated":"2018-03-21T20:18:56.933Z","comments":true,"path":"2018/03/22/Long-Longæœ‰è¶£çš„ç°è±¡/","link":"","permalink":"http://www.smxknife.com/2018/03/22/Long-Longæœ‰è¶£çš„ç°è±¡/","excerpt":"","text":"1. æè¿°é¦–å…ˆï¼Œè¿™é‡Œåº”è¯¥å£°æ˜ä¸€ä¸‹ï¼ŒLongç­‰å¯¹è±¡ç±»å‹åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œé‡‡ç”¨Long == Longè¿™ç§å½¢å¼æ˜¯é”™è¯¯çš„ã€‚ å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ï¼š 12345678Long left = 100L;Long right = 100L;// æ–¹æ³•1ï¼šSystem.out.println(left.doubleValue() == right.doubleValue());// æ–¹æ³•2ï¼šSystem.out.println(left.compareTo(right)); è¾“å‡ºç»“æœï¼š 12true0 1.1 å®éªŒ1å¦‚æœä½ äº²è‡ªæ“åˆ€ï¼ŒåŠ¨æ‰‹åšäº†ä»¥ä¸‹å®éªŒï¼Œä¹Ÿè®¸ä½ ä¼šçªç„¶å¾—åˆ°ä¸€ä¸ªè®©ä½ å›°æƒ‘çš„ç»“æœï¼š 1234Long left = 100L;Long right = 100L;System.out.println(left == right); è¾“å‡ºç»“æœï¼š 1true æ²¡é”™ï¼Œé‡‡ç”¨ == ç«Ÿç„¶ä¹Ÿèƒ½å¾—å‡ºtrueï¼Œä¹Ÿè®¸è¿™æ—¶å€™ä½ å¯èƒ½ä¼šè¯¯ä»¥ä¸ºjvmåœ¨è‡ªåŠ¨æ‹†ç®±ï¼ˆæˆ‘ä»¥å‰ä¹Ÿæ˜¯è¿™æ ·ä»¥ä¸ºï¼Œæœ‰ç‚¹å°ç™½ï¼ï¼ï¼ï¼‰ã€‚ 1.2 å®éªŒ2é‚£ä¹ˆè¯·ä½ å†åšä¸‹é¢è¿™ä¸ªå®éªŒï¼š 1234567891011Long left = 1000L;Long right = 1000L;// æ–¹æ³•1ï¼šSystem.out.println(left.doubleValue() == right.doubleValue());// æ–¹æ³•2ï¼šSystem.out.println(left.compareTo(right));// é”™è¯¯çš„æ–¹æ³•ï¼šSystem.out.println(left == right); è¾“å‡ºç»“æœ 123true0false ç­‰ä¼šï¼Œä»€ä¹ˆæƒ…å†µï¼Œæ€ä¹ˆåˆä¸ºfalseï¼Ÿ 1.3 å®éªŒ3ä¸æ€¥ï¼Œå†åšä¸€ä¸ªå®éªŒã€‚ 1234567for (int i = -200; i &lt; 200; i++) &#123; Long left = Long.valueOf(i); Long right = Long.valueOf(i); System.out.println(\"Long left = \" + i + \", Long right = \" + i + \", left == right :\" + (left == right)); &#125; è¾“å‡ºç»“æœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400Long left = -200, Long right = -200, left == right :falseLong left = -199, Long right = -199, left == right :falseLong left = -198, Long right = -198, left == right :falseLong left = -197, Long right = -197, left == right :falseLong left = -196, Long right = -196, left == right :falseLong left = -195, Long right = -195, left == right :falseLong left = -194, Long right = -194, left == right :falseLong left = -193, Long right = -193, left == right :falseLong left = -192, Long right = -192, left == right :falseLong left = -191, Long right = -191, left == right :falseLong left = -190, Long right = -190, left == right :falseLong left = -189, Long right = -189, left == right :falseLong left = -188, Long right = -188, left == right :falseLong left = -187, Long right = -187, left == right :falseLong left = -186, Long right = -186, left == right :falseLong left = -185, Long right = -185, left == right :falseLong left = -184, Long right = -184, left == right :falseLong left = -183, Long right = -183, left == right :falseLong left = -182, Long right = -182, left == right :falseLong left = -181, Long right = -181, left == right :falseLong left = -180, Long right = -180, left == right :falseLong left = -179, Long right = -179, left == right :falseLong left = -178, Long right = -178, left == right :falseLong left = -177, Long right = -177, left == right :falseLong left = -176, Long right = -176, left == right :falseLong left = -175, Long right = -175, left == right :falseLong left = -174, Long right = -174, left == right :falseLong left = -173, Long right = -173, left == right :falseLong left = -172, Long right = -172, left == right :falseLong left = -171, Long right = -171, left == right :falseLong left = -170, Long right = -170, left == right :falseLong left = -169, Long right = -169, left == right :falseLong left = -168, Long right = -168, left == right :falseLong left = -167, Long right = -167, left == right :falseLong left = -166, Long right = -166, left == right :falseLong left = -165, Long right = -165, left == right :falseLong left = -164, Long right = -164, left == right :falseLong left = -163, Long right = -163, left == right :falseLong left = -162, Long right = -162, left == right :falseLong left = -161, Long right = -161, left == right :falseLong left = -160, Long right = -160, left == right :falseLong left = -159, Long right = -159, left == right :falseLong left = -158, Long right = -158, left == right :falseLong left = -157, Long right = -157, left == right :falseLong left = -156, Long right = -156, left == right :falseLong left = -155, Long right = -155, left == right :falseLong left = -154, Long right = -154, left == right :falseLong left = -153, Long right = -153, left == right :falseLong left = -152, Long right = -152, left == right :falseLong left = -151, Long right = -151, left == right :falseLong left = -150, Long right = -150, left == right :falseLong left = -149, Long right = -149, left == right :falseLong left = -148, Long right = -148, left == right :falseLong left = -147, Long right = -147, left == right :falseLong left = -146, Long right = -146, left == right :falseLong left = -145, Long right = -145, left == right :falseLong left = -144, Long right = -144, left == right :falseLong left = -143, Long right = -143, left == right :falseLong left = -142, Long right = -142, left == right :falseLong left = -141, Long right = -141, left == right :falseLong left = -140, Long right = -140, left == right :falseLong left = -139, Long right = -139, left == right :falseLong left = -138, Long right = -138, left == right :falseLong left = -137, Long right = -137, left == right :falseLong left = -136, Long right = -136, left == right :falseLong left = -135, Long right = -135, left == right :falseLong left = -134, Long right = -134, left == right :falseLong left = -133, Long right = -133, left == right :falseLong left = -132, Long right = -132, left == right :falseLong left = -131, Long right = -131, left == right :falseLong left = -130, Long right = -130, left == right :falseLong left = -129, Long right = -129, left == right :falseLong left = -128, Long right = -128, left == right :trueLong left = -127, Long right = -127, left == right :trueLong left = -126, Long right = -126, left == right :trueLong left = -125, Long right = -125, left == right :trueLong left = -124, Long right = -124, left == right :trueLong left = -123, Long right = -123, left == right :trueLong left = -122, Long right = -122, left == right :trueLong left = -121, Long right = -121, left == right :trueLong left = -120, Long right = -120, left == right :trueLong left = -119, Long right = -119, left == right :trueLong left = -118, Long right = -118, left == right :trueLong left = -117, Long right = -117, left == right :trueLong left = -116, Long right = -116, left == right :trueLong left = -115, Long right = -115, left == right :trueLong left = -114, Long right = -114, left == right :trueLong left = -113, Long right = -113, left == right :trueLong left = -112, Long right = -112, left == right :trueLong left = -111, Long right = -111, left == right :trueLong left = -110, Long right = -110, left == right :trueLong left = -109, Long right = -109, left == right :trueLong left = -108, Long right = -108, left == right :trueLong left = -107, Long right = -107, left == right :trueLong left = -106, Long right = -106, left == right :trueLong left = -105, Long right = -105, left == right :trueLong left = -104, Long right = -104, left == right :trueLong left = -103, Long right = -103, left == right :trueLong left = -102, Long right = -102, left == right :trueLong left = -101, Long right = -101, left == right :trueLong left = -100, Long right = -100, left == right :trueLong left = -99, Long right = -99, left == right :trueLong left = -98, Long right = -98, left == right :trueLong left = -97, Long right = -97, left == right :trueLong left = -96, Long right = -96, left == right :trueLong left = -95, Long right = -95, left == right :trueLong left = -94, Long right = -94, left == right :trueLong left = -93, Long right = -93, left == right :trueLong left = -92, Long right = -92, left == right :trueLong left = -91, Long right = -91, left == right :trueLong left = -90, Long right = -90, left == right :trueLong left = -89, Long right = -89, left == right :trueLong left = -88, Long right = -88, left == right :trueLong left = -87, Long right = -87, left == right :trueLong left = -86, Long right = -86, left == right :trueLong left = -85, Long right = -85, left == right :trueLong left = -84, Long right = -84, left == right :trueLong left = -83, Long right = -83, left == right :trueLong left = -82, Long right = -82, left == right :trueLong left = -81, Long right = -81, left == right :trueLong left = -80, Long right = -80, left == right :trueLong left = -79, Long right = -79, left == right :trueLong left = -78, Long right = -78, left == right :trueLong left = -77, Long right = -77, left == right :trueLong left = -76, Long right = -76, left == right :trueLong left = -75, Long right = -75, left == right :trueLong left = -74, Long right = -74, left == right :trueLong left = -73, Long right = -73, left == right :trueLong left = -72, Long right = -72, left == right :trueLong left = -71, Long right = -71, left == right :trueLong left = -70, Long right = -70, left == right :trueLong left = -69, Long right = -69, left == right :trueLong left = -68, Long right = -68, left == right :trueLong left = -67, Long right = -67, left == right :trueLong left = -66, Long right = -66, left == right :trueLong left = -65, Long right = -65, left == right :trueLong left = -64, Long right = -64, left == right :trueLong left = -63, Long right = -63, left == right :trueLong left = -62, Long right = -62, left == right :trueLong left = -61, Long right = -61, left == right :trueLong left = -60, Long right = -60, left == right :trueLong left = -59, Long right = -59, left == right :trueLong left = -58, Long right = -58, left == right :trueLong left = -57, Long right = -57, left == right :trueLong left = -56, Long right = -56, left == right :trueLong left = -55, Long right = -55, left == right :trueLong left = -54, Long right = -54, left == right :trueLong left = -53, Long right = -53, left == right :trueLong left = -52, Long right = -52, left == right :trueLong left = -51, Long right = -51, left == right :trueLong left = -50, Long right = -50, left == right :trueLong left = -49, Long right = -49, left == right :trueLong left = -48, Long right = -48, left == right :trueLong left = -47, Long right = -47, left == right :trueLong left = -46, Long right = -46, left == right :trueLong left = -45, Long right = -45, left == right :trueLong left = -44, Long right = -44, left == right :trueLong left = -43, Long right = -43, left == right :trueLong left = -42, Long right = -42, left == right :trueLong left = -41, Long right = -41, left == right :trueLong left = -40, Long right = -40, left == right :trueLong left = -39, Long right = -39, left == right :trueLong left = -38, Long right = -38, left == right :trueLong left = -37, Long right = -37, left == right :trueLong left = -36, Long right = -36, left == right :trueLong left = -35, Long right = -35, left == right :trueLong left = -34, Long right = -34, left == right :trueLong left = -33, Long right = -33, left == right :trueLong left = -32, Long right = -32, left == right :trueLong left = -31, Long right = -31, left == right :trueLong left = -30, Long right = -30, left == right :trueLong left = -29, Long right = -29, left == right :trueLong left = -28, Long right = -28, left == right :trueLong left = -27, Long right = -27, left == right :trueLong left = -26, Long right = -26, left == right :trueLong left = -25, Long right = -25, left == right :trueLong left = -24, Long right = -24, left == right :trueLong left = -23, Long right = -23, left == right :trueLong left = -22, Long right = -22, left == right :trueLong left = -21, Long right = -21, left == right :trueLong left = -20, Long right = -20, left == right :trueLong left = -19, Long right = -19, left == right :trueLong left = -18, Long right = -18, left == right :trueLong left = -17, Long right = -17, left == right :trueLong left = -16, Long right = -16, left == right :trueLong left = -15, Long right = -15, left == right :trueLong left = -14, Long right = -14, left == right :trueLong left = -13, Long right = -13, left == right :trueLong left = -12, Long right = -12, left == right :trueLong left = -11, Long right = -11, left == right :trueLong left = -10, Long right = -10, left == right :trueLong left = -9, Long right = -9, left == right :trueLong left = -8, Long right = -8, left == right :trueLong left = -7, Long right = -7, left == right :trueLong left = -6, Long right = -6, left == right :trueLong left = -5, Long right = -5, left == right :trueLong left = -4, Long right = -4, left == right :trueLong left = -3, Long right = -3, left == right :trueLong left = -2, Long right = -2, left == right :trueLong left = -1, Long right = -1, left == right :trueLong left = 0, Long right = 0, left == right :trueLong left = 1, Long right = 1, left == right :trueLong left = 2, Long right = 2, left == right :trueLong left = 3, Long right = 3, left == right :trueLong left = 4, Long right = 4, left == right :trueLong left = 5, Long right = 5, left == right :trueLong left = 6, Long right = 6, left == right :trueLong left = 7, Long right = 7, left == right :trueLong left = 8, Long right = 8, left == right :trueLong left = 9, Long right = 9, left == right :trueLong left = 10, Long right = 10, left == right :trueLong left = 11, Long right = 11, left == right :trueLong left = 12, Long right = 12, left == right :trueLong left = 13, Long right = 13, left == right :trueLong left = 14, Long right = 14, left == right :trueLong left = 15, Long right = 15, left == right :trueLong left = 16, Long right = 16, left == right :trueLong left = 17, Long right = 17, left == right :trueLong left = 18, Long right = 18, left == right :trueLong left = 19, Long right = 19, left == right :trueLong left = 20, Long right = 20, left == right :trueLong left = 21, Long right = 21, left == right :trueLong left = 22, Long right = 22, left == right :trueLong left = 23, Long right = 23, left == right :trueLong left = 24, Long right = 24, left == right :trueLong left = 25, Long right = 25, left == right :trueLong left = 26, Long right = 26, left == right :trueLong left = 27, Long right = 27, left == right :trueLong left = 28, Long right = 28, left == right :trueLong left = 29, Long right = 29, left == right :trueLong left = 30, Long right = 30, left == right :trueLong left = 31, Long right = 31, left == right :trueLong left = 32, Long right = 32, left == right :trueLong left = 33, Long right = 33, left == right :trueLong left = 34, Long right = 34, left == right :trueLong left = 35, Long right = 35, left == right :trueLong left = 36, Long right = 36, left == right :trueLong left = 37, Long right = 37, left == right :trueLong left = 38, Long right = 38, left == right :trueLong left = 39, Long right = 39, left == right :trueLong left = 40, Long right = 40, left == right :trueLong left = 41, Long right = 41, left == right :trueLong left = 42, Long right = 42, left == right :trueLong left = 43, Long right = 43, left == right :trueLong left = 44, Long right = 44, left == right :trueLong left = 45, Long right = 45, left == right :trueLong left = 46, Long right = 46, left == right :trueLong left = 47, Long right = 47, left == right :trueLong left = 48, Long right = 48, left == right :trueLong left = 49, Long right = 49, left == right :trueLong left = 50, Long right = 50, left == right :trueLong left = 51, Long right = 51, left == right :trueLong left = 52, Long right = 52, left == right :trueLong left = 53, Long right = 53, left == right :trueLong left = 54, Long right = 54, left == right :trueLong left = 55, Long right = 55, left == right :trueLong left = 56, Long right = 56, left == right :trueLong left = 57, Long right = 57, left == right :trueLong left = 58, Long right = 58, left == right :trueLong left = 59, Long right = 59, left == right :trueLong left = 60, Long right = 60, left == right :trueLong left = 61, Long right = 61, left == right :trueLong left = 62, Long right = 62, left == right :trueLong left = 63, Long right = 63, left == right :trueLong left = 64, Long right = 64, left == right :trueLong left = 65, Long right = 65, left == right :trueLong left = 66, Long right = 66, left == right :trueLong left = 67, Long right = 67, left == right :trueLong left = 68, Long right = 68, left == right :trueLong left = 69, Long right = 69, left == right :trueLong left = 70, Long right = 70, left == right :trueLong left = 71, Long right = 71, left == right :trueLong left = 72, Long right = 72, left == right :trueLong left = 73, Long right = 73, left == right :trueLong left = 74, Long right = 74, left == right :trueLong left = 75, Long right = 75, left == right :trueLong left = 76, Long right = 76, left == right :trueLong left = 77, Long right = 77, left == right :trueLong left = 78, Long right = 78, left == right :trueLong left = 79, Long right = 79, left == right :trueLong left = 80, Long right = 80, left == right :trueLong left = 81, Long right = 81, left == right :trueLong left = 82, Long right = 82, left == right :trueLong left = 83, Long right = 83, left == right :trueLong left = 84, Long right = 84, left == right :trueLong left = 85, Long right = 85, left == right :trueLong left = 86, Long right = 86, left == right :trueLong left = 87, Long right = 87, left == right :trueLong left = 88, Long right = 88, left == right :trueLong left = 89, Long right = 89, left == right :trueLong left = 90, Long right = 90, left == right :trueLong left = 91, Long right = 91, left == right :trueLong left = 92, Long right = 92, left == right :trueLong left = 93, Long right = 93, left == right :trueLong left = 94, Long right = 94, left == right :trueLong left = 95, Long right = 95, left == right :trueLong left = 96, Long right = 96, left == right :trueLong left = 97, Long right = 97, left == right :trueLong left = 98, Long right = 98, left == right :trueLong left = 99, Long right = 99, left == right :trueLong left = 100, Long right = 100, left == right :trueLong left = 101, Long right = 101, left == right :trueLong left = 102, Long right = 102, left == right :trueLong left = 103, Long right = 103, left == right :trueLong left = 104, Long right = 104, left == right :trueLong left = 105, Long right = 105, left == right :trueLong left = 106, Long right = 106, left == right :trueLong left = 107, Long right = 107, left == right :trueLong left = 108, Long right = 108, left == right :trueLong left = 109, Long right = 109, left == right :trueLong left = 110, Long right = 110, left == right :trueLong left = 111, Long right = 111, left == right :trueLong left = 112, Long right = 112, left == right :trueLong left = 113, Long right = 113, left == right :trueLong left = 114, Long right = 114, left == right :trueLong left = 115, Long right = 115, left == right :trueLong left = 116, Long right = 116, left == right :trueLong left = 117, Long right = 117, left == right :trueLong left = 118, Long right = 118, left == right :trueLong left = 119, Long right = 119, left == right :trueLong left = 120, Long right = 120, left == right :trueLong left = 121, Long right = 121, left == right :trueLong left = 122, Long right = 122, left == right :trueLong left = 123, Long right = 123, left == right :trueLong left = 124, Long right = 124, left == right :trueLong left = 125, Long right = 125, left == right :trueLong left = 126, Long right = 126, left == right :trueLong left = 127, Long right = 127, left == right :trueLong left = 128, Long right = 128, left == right :falseLong left = 129, Long right = 129, left == right :falseLong left = 130, Long right = 130, left == right :falseLong left = 131, Long right = 131, left == right :falseLong left = 132, Long right = 132, left == right :falseLong left = 133, Long right = 133, left == right :falseLong left = 134, Long right = 134, left == right :falseLong left = 135, Long right = 135, left == right :falseLong left = 136, Long right = 136, left == right :falseLong left = 137, Long right = 137, left == right :falseLong left = 138, Long right = 138, left == right :falseLong left = 139, Long right = 139, left == right :falseLong left = 140, Long right = 140, left == right :falseLong left = 141, Long right = 141, left == right :falseLong left = 142, Long right = 142, left == right :falseLong left = 143, Long right = 143, left == right :falseLong left = 144, Long right = 144, left == right :falseLong left = 145, Long right = 145, left == right :falseLong left = 146, Long right = 146, left == right :falseLong left = 147, Long right = 147, left == right :falseLong left = 148, Long right = 148, left == right :falseLong left = 149, Long right = 149, left == right :falseLong left = 150, Long right = 150, left == right :falseLong left = 151, Long right = 151, left == right :falseLong left = 152, Long right = 152, left == right :falseLong left = 153, Long right = 153, left == right :falseLong left = 154, Long right = 154, left == right :falseLong left = 155, Long right = 155, left == right :falseLong left = 156, Long right = 156, left == right :falseLong left = 157, Long right = 157, left == right :falseLong left = 158, Long right = 158, left == right :falseLong left = 159, Long right = 159, left == right :falseLong left = 160, Long right = 160, left == right :falseLong left = 161, Long right = 161, left == right :falseLong left = 162, Long right = 162, left == right :falseLong left = 163, Long right = 163, left == right :falseLong left = 164, Long right = 164, left == right :falseLong left = 165, Long right = 165, left == right :falseLong left = 166, Long right = 166, left == right :falseLong left = 167, Long right = 167, left == right :falseLong left = 168, Long right = 168, left == right :falseLong left = 169, Long right = 169, left == right :falseLong left = 170, Long right = 170, left == right :falseLong left = 171, Long right = 171, left == right :falseLong left = 172, Long right = 172, left == right :falseLong left = 173, Long right = 173, left == right :falseLong left = 174, Long right = 174, left == right :falseLong left = 175, Long right = 175, left == right :falseLong left = 176, Long right = 176, left == right :falseLong left = 177, Long right = 177, left == right :falseLong left = 178, Long right = 178, left == right :falseLong left = 179, Long right = 179, left == right :falseLong left = 180, Long right = 180, left == right :falseLong left = 181, Long right = 181, left == right :falseLong left = 182, Long right = 182, left == right :falseLong left = 183, Long right = 183, left == right :falseLong left = 184, Long right = 184, left == right :falseLong left = 185, Long right = 185, left == right :falseLong left = 186, Long right = 186, left == right :falseLong left = 187, Long right = 187, left == right :falseLong left = 188, Long right = 188, left == right :falseLong left = 189, Long right = 189, left == right :falseLong left = 190, Long right = 190, left == right :falseLong left = 191, Long right = 191, left == right :falseLong left = 192, Long right = 192, left == right :falseLong left = 193, Long right = 193, left == right :falseLong left = 194, Long right = 194, left == right :falseLong left = 195, Long right = 195, left == right :falseLong left = 196, Long right = 196, left == right :falseLong left = 197, Long right = 197, left == right :falseLong left = 198, Long right = 198, left == right :falseLong left = 199, Long right = 199, left == right :false é€šè¿‡è¿™ä¸ªè¶…é•¿çš„è¾“å‡ºç»“æœï¼Œä½ ä¼šå‘ç°ï¼Œå­˜åœ¨ä¸€ä¸ªåŒºé—´[-128, 127]ï¼Œåœ¨è¿™ä¸ªåŒºé—´é‡Œé€šè¿‡ == è¿™ç§æ–¹å¼è¿”å›çš„æ˜¯true ï¼Œå…¶ä»–è¿”å›çš„éƒ½æ˜¯falseã€‚ 2. æ€»ç»“å…¶å®ï¼Œé€šè¿‡æºç åˆ†æï¼š 1234567public static Long valueOf(long l) &#123; final int offset = 128; if (l &gt;= -128 &amp;&amp; l &lt;= 127) &#123; // will cache return LongCache.cache[(int)l + offset]; &#125; return new Long(l); &#125; åœ¨128~127è¿™äº›æ•°çš„å¯¹è±¡åœ¨å†…å­˜ä¸­è¢«ç¼“å­˜èµ·æ¥ï¼Œåœ¨å†…å­˜ä¸­æä¾›é‡ç”¨ï¼Œè¿™äº›æ•°è·å–çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨è·å–ç¼“å­˜ä¸­çš„æ•°ï¼Œè€Œä¸æ˜¯newå‡ºæ¥çš„å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œè¿™ä¸è‡ªåŠ¨æ‰“åŒ…æ‹†åŒ…æ— å…³ã€‚ å†æ‰€ä»¥â€¦ï¼Œåˆ¤è¯»Longå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ—¶å€™å»ºè®®ä¸è¦é‡‡ç”¨ == çš„å½¢å¼ï¼Œç¨‹åºä¸­æ— æ³•ç»å¯¹çš„åˆ¤æ–­å‚æ•°å€¼æ˜¯å¦ä¼šåœ¨è¿™ä¸ªåŒºé—´å†…ï¼Œå¦‚æœä¸åœ¨ï¼Œé‚£å°±å‡ºç°è®©ä½ æ‘¸ä¸ç€å¤´è„‘çš„é—®é¢˜ã€‚","categories":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/tags/java/"}]},{"title":"Spring_Transactionä½¿ç”¨","slug":"Spring-Transactionä½¿ç”¨","date":"2018-03-21T20:13:29.000Z","updated":"2018-03-21T20:14:59.000Z","comments":true,"path":"2018/03/22/Spring-Transactionä½¿ç”¨/","link":"","permalink":"http://www.smxknife.com/2018/03/22/Spring-Transactionä½¿ç”¨/","excerpt":"","text":"æ³¨è§£@Transactionalæ³¨æ„å¸¸ç”¨çš„è¯¥æ³¨è§£æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯javaæœ¬èº«çš„ï¼Œä¸€ä¸ªæ˜¯springçš„org.springframework.transaction.annotation.Transactionaljavax.transaction.Transactionalè¿™ä¸¤ä¸ªåœ¨ä½¿ç”¨ä¸ŠåŸºæœ¬æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªæ˜¯å±æ€§åç§°ç¨æœ‰ä¸åŒå…¶ä¸­ï¼Œrollbackçš„é»˜è®¤ç±»ä¸ºRuntimeExceptionå’ŒErrorï¼Œéš”ç¦»çº§åˆ«é»˜è®¤ä¸ºæ•°æ®æºçš„éš”ç¦»çº§åˆ«ï¼Œä¼ æ’­è¡Œä¸ºé»˜è®¤ä¸ºREQUIREä¸‹é¢ä»¥springçš„æ³¨è§£ä½¿ç”¨ä¸ºä¾‹ åœ¨serviceçš„å®ç°ç±»çš„æ–¹æ³•ä¸Šä½¿ç”¨demo11234public User createUser(User user) &#123; userRepository.save(user); throw new RuntimeException();&#125; demo212345@Transactional(rollbackOn = Exception.class)public User createUser(User user) &#123; userRepository.save(user); throw new RuntimeException();&#125; demo312345@Transactionalpublic User createUser(User user) &#123; userRepository.save(user); throw new RuntimeException();&#125; demo412345@Transactionalpublic User createUser(User user) throws Exception &#123; userRepository.save(user); throw new Excepton();&#125; ps:è¿™é‡Œè¦æ³¨æ„çš„æ˜¯Exceptionå¼‚å¸¸çš„åˆ†ç±»ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆRuntimeException/æœªæ£€æŸ¥å¼‚å¸¸ï¼‰ å’Œéè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆéRuntimeException/å·²æ£€æŸ¥å¼‚å¸¸ï¼‰ï¼Œæ‰€æœ‰çš„RuntimeExceptionå¯ä»¥ä¸ éœ€è¦æ•è·å¼‚å¸¸ï¼Œé»˜è®¤çš„åœ¨throwsé‡Œé¢å·²ç»å¤„ç†ï¼Œè€ŒéRuntimeExceptionéƒ½éœ€è¦ï¼Œé€šè¿‡try catch æˆ–è€… throws æ¥æ‰‹åŠ¨å¤„ç†æ•è· demo5@Transactional(rollbackOn = Exception.class) public User createUser(User user) throws Exception { userRepository.save(user); throw new Exception(); } è¿è¡Œç»“æœæ•°æ®ä¸ä¼šå› ä¸ºå¼‚å¸¸è€Œæ’å…¥æ•°æ®åº“çš„demoæœ‰ï¼šdemo1å’Œdemo4ï¼Œå…¶ä»–æ‰€æœ‰çš„çš„éƒ½ä¼šå› ä¸ºå¼‚å¸¸è€Œå‘ç”Ÿäº‹åŠ¡çš„å›æ»šæ“ä½œ å…¶ä¸­ï¼Œ demo1ï¼šå› ä¸ºæ²¡æœ‰ä½¿ç”¨äº‹åŠ¡ï¼Œæ‰€æœ‰åœ¨saveæ–¹æ³•å®Œæˆä¹‹åç›´æ¥commitäº‹åŠ¡ï¼Œæ­£å¸¸æäº¤demo2ï¼šå›æ»šçš„å¼‚å¸¸è®¾ç½®ä¸ºExceptionï¼Œè€ŒRuntimeExceptionæ˜¯Exceptionçš„å­ç±»ï¼Œæ‰€æœ‰å‘ç”Ÿå¼‚å¸¸äº‹åŠ¡å›æ»šdemo3ï¼šé‡‡ç”¨é»˜è®¤çš„è®¾ç½®ï¼Œ@Transactionalé»˜è®¤çš„è®¾ç½®ä¸ºRuntimeExceptionå’ŒErrorï¼Œè¿™ä¸¤è€…åŠå…¶å­ç±»ï¼Œé‚£ä¹ˆåœ¨å‘ç”ŸRuntimeExceptionå¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡å‘ç”Ÿå›æ»šdemo4ï¼šé‡‡ç”¨é»˜è®¤çš„è®¾ç½®ï¼Œä½†æ˜¯æŠ›å‡ºçš„å¼‚å¸¸æ—¶Exceptionï¼Œæ— æ³•è¢«äº‹åŠ¡æ•è·ï¼Œæ‰€ä»¥æ— æ³•è®©äº‹åŠ¡å›æ»šdemo5ï¼šæ‰‹åŠ¨è®¾ç½®å›æ»šçš„å¼‚å¸¸ä¸ºExceptionï¼Œé‚£ä¹ˆå‘ç”Ÿæ‰€æœ‰çš„Exceptionæˆ–è€…å­å¼‚å¸¸ï¼Œéƒ½ä¼šè§¦å‘å›æ»šæ“ä½œ äº‹åŠ¡æ— æ³•ç”Ÿæ•ˆçš„è§£å†³æ€è·¯ é¦–å…ˆè¦ç¡®è®¤æ•°æ®åº“å’Œè¡¨çš„å­˜å‚¨å¼•æ“æ˜¯å¦æ˜¯InnoDBï¼Œå¦‚æœæ˜¯MyISAMæ˜¯ä¸æ”¯æŒäº‹åŠ¡çš„ å¦‚æœäº‹åŠ¡åŠ åœ¨Serviceæ¥å£çš„æ–¹æ³•ä¸Šï¼Œé‚£ä¹ˆè¦ç¡®å®šï¼Œå®ç°ç±»æ˜¯å¦æ˜¯é€šè¿‡javaåŠ¨æ€ä»£ç†è¿›è¡Œå®ä¾‹åŒ–çš„ï¼Œå¦‚æœä¸æ˜¯é€šè¿‡ä»£ç†ï¼Œé‚£ä¹ˆäº‹åŠ¡ä¹Ÿä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºcglibæ˜¯ä¸ç”¨å®ç°æ¥å£çš„ äº‹åŠ¡çš„å¼‚å¸¸å¤„ç†æ˜¯å¦åˆç†ï¼Œå…·ä½“çš„æ€è·¯å‚è€ƒä¸Šé¢ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œåœ¨springä¸­å®šä¹‰çš„äº‹åŠ¡çš„æ–¹æ³•æ˜¯å¦æ˜¯publicç±»å‹","categories":[{"name":"spring","slug":"spring","permalink":"http://www.smxknife.com/categories/spring/"}],"tags":[{"name":"spring","slug":"spring","permalink":"http://www.smxknife.com/tags/spring/"},{"name":"äº‹åŠ¡","slug":"äº‹åŠ¡","permalink":"http://www.smxknife.com/tags/äº‹åŠ¡/"}]},{"title":"javaåŠ¨æ€ä»£ç†ï¼Œä¸ä¸€æ ·çš„ç†è§£æ–¹å¼","slug":"javaåŠ¨æ€ä»£ç†ï¼Œä¸ä¸€æ ·çš„ç†è§£æ–¹å¼","date":"2018-03-21T20:05:46.000Z","updated":"2018-03-21T20:06:54.000Z","comments":true,"path":"2018/03/22/javaåŠ¨æ€ä»£ç†ï¼Œä¸ä¸€æ ·çš„ç†è§£æ–¹å¼/","link":"","permalink":"http://www.smxknife.com/2018/03/22/javaåŠ¨æ€ä»£ç†ï¼Œä¸ä¸€æ ·çš„ç†è§£æ–¹å¼/","excerpt":"","text":"ç®€ä»‹æˆ‘æ‰€ç†è§£çš„åŠ¨æ€ä»£ç†ï¼Œæœ€åçš„è¿è¡Œæ–¹å¼å…¶å®æ˜¯ä¸€ä¸ªé™æ€ä»£ç†åŠ ä¸Šä¸€äº›åå°„æœºåˆ¶ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘è¯´çš„æ˜¯æœ€åçš„è¿è¡Œæ–¹å¼ é™æ€ä»£ç†æŠ›å¼€åŠ¨æ€ä»£ç†å…ˆä¸è¯´ï¼Œå…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯é™æ€ä»£ç†ï¼Œæ˜ç™½äº†é™æ€ä»£ç†ï¼Œé‚£ä¹ˆåŠ¨æ€ä»£ç†æœ€åæ˜¯å¦‚ä½•è¿è¡Œçš„è¯»å®Œæœ¬ç¯‡æ–‡ç« åŸºæœ¬ä¸Šä¹Ÿå°±æ˜ç™½äº† 123456789101112131415161718192021222324252627282930313233public interface Service &#123; public void doSomething(String context);&#125;public class ServiceImpl implements Service &#123; @Override public void doSomething(String context) &#123; System.out.println(\"do \" + context); &#125;&#125;public class StaticProxy &#123; private Service service; public StaticProxy(Service service) &#123; this.service = service; &#125; public void doSomething(String content) &#123; System.out.println(\"do pre\"); service.doSomething(content); System.out.println(\"do post\"); &#125;&#125;public class StaticMain &#123; public static void main(String[] args) &#123; StaticProxy proxy = new StaticProxy(new ServiceImpl()); proxy.doSomething(\"coding\"); &#125;&#125; è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„é™æ€ä»£ç†çš„ä¾‹å­ï¼ŒæŠŠServiceImplçš„æ‰§è¡Œäº¤ç»™äº†StaticProxyæ¥æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œçš„å‰åå¯ä»¥æ·»åŠ do preå’Œdo postçš„ä¸šåŠ¡é€»è¾‘ã€‚StaticProxyä¼šåœ¨ç¼–è¯‘æœŸå°±è¢«ç¼–è¯‘æˆä¸€ä¸ªclassæ–‡ä»¶è¢«åŠ è½½ï¼ˆè¿™ä¸åŠ¨æ€ä»£ç†æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼‰ åŠ¨æ€ä»£ç†å†æ¥çœ‹åŠ¨æ€ä»£ç†ï¼Œå…ˆä¸è¯´åŠ¨æ€ä»£ç†çš„å®ç°è¿‡ç¨‹ï¼Œä¸Šé¢è¯´åˆ°æ˜¯å¦ç¼–è¯‘æˆclassæ–‡ä»¶æ˜¯é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†çš„ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«ã€‚é‚£è¿™å°±è¡¨æ˜ï¼ŒåŠ¨æ€ä»£ç†æ˜¯æ²¡æœ‰classæ–‡ä»¶çš„ï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå…¶å®ï¼Œæˆ‘ä¸ªäººç†è§£åŠ¨æ€ä»£ç†ä¹‹æ‰€ä»¥å«åšåŠ¨æ€çš„ï¼Œå°±æ˜¯è¿™ä¸ªç”Ÿæˆçš„è¿‡ç¨‹æ˜¯ä¸å®šçš„ã€‚åœ¨è¿è¡Œæ—¶ç”Ÿæˆä¸€ä»½ä»£ç†ç±»çš„å­—èŠ‚ç å¹¶åŠ è½½åˆ°jvmä¸­ã€‚ å…ˆæ¥çœ‹ä¸€ä¸‹æœ€åç”Ÿæˆçš„å­—èŠ‚ç ç±»ï¼Œå°±ä»¥ä¸Šé¢çš„ç±»å‹ä¸ºä¾‹ 123456789101112public final class $Proxy1 extends Proxy implements Service &#123; private InvocationHandler h; // è¿™æ˜¯javaæä¾›çš„ä¸€ä¸ªæ¥å£ private $Proxy1() &#123;&#125; private $Proxy1(InvocationHandler h) &#123; this.h = h; &#125; public void doSomething(String content) &#123; Method method = Service.class.getMethod(\"doSomething\", new Class[]&#123;String.class&#125;); return h.invoke(this, method, new Object[]&#123;new String(content)&#125;); &#125;&#125; çœ‹ä¸€ä¸‹$Proxy1è¿™ä¸ªç±»ä¸ä¸Šé¢çš„StaticProxyçš„ç»“æ„æ˜¯ä¸æ˜¯ç±»ä¼¼ï¼Œ éƒ½å®ç°äº†Service éƒ½æ˜¯å°†æ¥å£çš„å®ç°æ³¨å…¥åˆ°æ„é€ å‡½æ•°ä¸­ï¼Œä¸ºæ¥å£æä¾›å…·ä½“çš„å®ç°ç±» æœ€åéƒ½è°ƒç”¨doSomethingæ¥è°ƒç”¨å…·ä½“çš„ä¸šåŠ¡ï¼Œåªä¸è¿‡åœ¨åŠ¨æ€ä»£ç†é‡Œé¢é€šè¿‡åå°„æ¥è°ƒç”¨ çœ‹å®Œ$Proxy1ï¼Œä¸ªäººæ„Ÿè§‰å°±æ˜¯ä¸€ä¸ªé™æ€ä»£ç†çš„ä¸€ä¸ªå˜ç§ï¼ŒæŠŠè¿™ä¸ªç»“æœçœ‹æ˜ç™½äº†ï¼Œé‚£åé¢å…¶å®éƒ½æ˜¯ä¸€äº›æ¨¡æ¿ä»£ç ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†ç”Ÿæˆè¿™ä¸ªç±» æœ‰äººä¼šé—®$Proxy1ï¼Œä¸ºä»€ä¹ˆä¼šå«è¿™ä¸ªåå­—ï¼Œæˆ‘åªèƒ½è¯´æˆ‘ä¸çŸ¥é“ï¼Œjvmå°±æ˜¯è¿™ä¹ˆåšçš„ï¼Œä»¥\\$å¼€å¤´ï¼Œä»¥æ•°å­—æ ‡å·æ¥ç»“å°¾ã€‚æˆ‘ç°åœ¨ä¸å…³å¿ƒï¼Œæˆ‘å¾ˆå¼€å¿ƒæˆ‘æ­å¼€åŠ¨æ€ä»£ç†çš„ä¸€å±‚ç¥ç§˜çš„é¢çº±ï¼Œè‡³å°‘ï¼Œä¸å†åƒä»¥å‰é‚£æ ·è®©äººæ„Ÿè§‰é«˜ä¸å¯æ”€äº†ï¼ˆå…¶å®ï¼Œè¿˜æœ‰å¾ˆå¤šå±‚æ²¡æ­å¼€ï¼‰ é‚£ä¸‹é¢å°±æ¥çœ‹ä¸€ä¸‹é‚£äº›æ¨¡æ¿ä»£ç æŠŠ 123456789101112131415161718192021222324252627282930313233343536373839public interface Service &#123; public void doSomething(String context);&#125;public class ServiceImpl implements Service &#123; @Override public void doSomething(String context) &#123; System.out.println(\"do \" + context); &#125;&#125;public class ServiceInvocationHandler implements InvocationHandler &#123; private Object object; public ServiceInvocationHandler(Object object) &#123; this.object = object; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println(\"do pre\"); method.invoke(object, args); System.out.println(\"do post\"); return null; &#125;&#125;public class DynamicMain &#123; public static void main(String[] args) &#123; Service service = new ServiceImpl(); ServiceInvocationHandler handler = new ServiceInvocationHandler(service); Service proxyService = (Service) Proxy.newProxyInstance(handler.getClass().getClassLoader(), service.getClass().getInterfaces(), handler); proxyService.doSomething(\"coding\"); &#125;&#125; Serviceä¸ServiceImplä¸é™æ€ä»£ç†æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå°†é™æ€ä»£ç†çš„ä»£ç†ç±»æ¢æˆäº†InvocationHandlerå¤„ç†å™¨çš„å®ç°ç±»ã€‚å†æœ‰å°±æ˜¯è°ƒç”¨æ–¹å¼å˜äº†ä¸€ä¸‹ã€‚ è¿™é‡Œä»mainå‡½æ•°å¼€å§‹çœ‹ï¼Œå…ˆæŒ‡å®šServiceçš„å®ç°ç±»ï¼Œå¹¶æ„é€ Handlerå®ç°ç±»ã€‚ä¸‹é¢æ˜¯é‡ç‚¹ï¼Œå°±æ˜¯ä¸‹é¢è¿™è¡Œä»£ç ï¼Œç”¨æ¥ç”Ÿæˆ$Proxy1è¿™ä¸ªå­—èŠ‚ç ç±»çš„ Proxyçš„newProxyInstanceæ–¹æ³•ï¼Œé¦–å…ˆä¼ é€’ä¸€ä¸ªclassloaderï¼Œç”¨è¿™ä¸ªclassloaderæ¥åŠ è½½ç”Ÿæˆçš„å­—èŠ‚ç ç±»åˆ°jvmä¸­ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ServiceImplå®ç°çš„æ¥å£ï¼ˆå³Serviceï¼‰ï¼Œä½¿ç”Ÿæˆçš„å­—èŠ‚ç ç±»ä¹Ÿå®ç°è¿™ä¸ªæ¥å£ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯è¿™ä¸ªè‡ªå®šä¹‰çš„Handleräº†ï¼Œå°†è‡ªå®šä¹‰çš„ServiceInvocationHandlerä¼ é€’ç»™äº†$Proxy1ä¸­çš„InvocationHandleræ¥å£ã€‚ proxyService.doSomethingï¼Œå…¶å®å°±æ˜¯è°ƒç”¨çš„$Proxy1çš„doSomethingæ–¹æ³•ï¼Œç„¶åå†è°ƒç”¨invokeæ–¹æ³•ã€‚ æ€ä¹ˆæ ·ï¼Œç°åœ¨æ˜¯ä¸æ˜¯å·²ç»å¯¹åŠ¨æ€ä»£ç†çš„ç†è§£åˆåŠ æ·±äº†ä¸€æ­¥å‘¢ï¼ï¼ï¼ğŸ™‚","categories":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"http://www.smxknife.com/tags/java/"},{"name":"åŠ¨æ€ä»£ç†","slug":"åŠ¨æ€ä»£ç†","permalink":"http://www.smxknife.com/tags/åŠ¨æ€ä»£ç†/"}]}]}